; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave -o.\flash\obj\can_network.o --asm_dir=.\Flash\List\ --list_dir=.\Flash\List\ --depend=.\flash\obj\can_network.d --cpu=Cortex-M4.fp --apcs=interwork -O0 --diag_suppress=9931,870 -I..\..\Libraries\CMSIS\Include -I..\..\Libraries\CMSIS\Device\ST\STM32F4xx\Include -I..\..\Libraries\STM32F4xx_StdPeriph_Driver\inc -I..\..\User\bsp_stm32f4xx\inc -I..\..\User\bsp_stm32f4xx -I..\..\User -I..\..\User\arithmetic -D__MICROLIB -D__UVISION_VERSION=523 -D_RTE_ -DSTM32F407xx -DUSE_STDPERIPH_DRIVER -DSTM32F40XX --omf_browse=.\flash\obj\can_network.crf ..\..\User\can_network.c]
                          THUMB

                          AREA ||i.CanBreath||, CODE, READONLY, ALIGN=2

                  CanBreath PROC
;;;651    
;;;652    void CanBreath(void)
000000  b570              PUSH     {r4-r6,lr}
;;;653    {
;;;654    	uint8_t len;
;;;655    	uint16_t mycrc;
;;;656    	static uint16_t DelayTim;
;;;657    	if(0 == CanComData->OnlineTim){
000002  4840              LDR      r0,|L1.260|
000004  6800              LDR      r0,[r0,#0]  ; CanComData
000006  f5005080          ADD      r0,r0,#0x1000
00000a  f8b0040c          LDRH     r0,[r0,#0x40c]
00000e  2800              CMP      r0,#0
000010  d166              BNE      |L1.224|
;;;658    		//CanComData->OnlineFlag = 1;
;;;659    		if(0 == DelayTim){
000012  483d              LDR      r0,|L1.264|
000014  8800              LDRH     r0,[r0,#0]  ; DelayTim
000016  2800              CMP      r0,#0
000018  d13b              BNE      |L1.146|
;;;660    			len = 0;
00001a  2400              MOVS     r4,#0
;;;661    			CanComData->Txbuf[len++] = (uint8_t)iCanComHad;
00001c  22ff              MOVS     r2,#0xff
00001e  4621              MOV      r1,r4
000020  1c64              ADDS     r4,r4,#1
000022  4838              LDR      r0,|L1.260|
000024  6800              LDR      r0,[r0,#0]  ; CanComData
000026  5442              STRB     r2,[r0,r1]
;;;662    			CanComData->Txbuf[len++] = iCanComHad>>8;
000028  22cb              MOVS     r2,#0xcb
00002a  4621              MOV      r1,r4
00002c  1c64              ADDS     r4,r4,#1
00002e  4835              LDR      r0,|L1.260|
000030  6800              LDR      r0,[r0,#0]  ; CanComData
000032  5442              STRB     r2,[r0,r1]
;;;663    			CanComData->Txbuf[len++] = 0x64|0x80;
000034  22e4              MOVS     r2,#0xe4
000036  4621              MOV      r1,r4
000038  1c64              ADDS     r4,r4,#1
00003a  4832              LDR      r0,|L1.260|
00003c  6800              LDR      r0,[r0,#0]  ; CanComData
00003e  5442              STRB     r2,[r0,r1]
;;;664    			len++;
000040  1c64              ADDS     r4,r4,#1
;;;665    			len++;
000042  1c64              ADDS     r4,r4,#1
;;;666    			CanComData->Txbuf[3] = (len-5);
000044  1f60              SUBS     r0,r4,#5
000046  492f              LDR      r1,|L1.260|
000048  6809              LDR      r1,[r1,#0]  ; CanComData
00004a  70c8              STRB     r0,[r1,#3]
;;;667    			CanComData->Txbuf[4] = (len-5)>>8;
00004c  1f60              SUBS     r0,r4,#5
00004e  0a00              LSRS     r0,r0,#8
000050  492c              LDR      r1,|L1.260|
000052  6809              LDR      r1,[r1,#0]  ; CanComData
000054  7108              STRB     r0,[r1,#4]
;;;668    			mycrc = CRC_GetModbus16(CanComData->Txbuf, len);
000056  4621              MOV      r1,r4
000058  482a              LDR      r0,|L1.260|
00005a  6800              LDR      r0,[r0,#0]  ; CanComData
00005c  f7fffffe          BL       CRC_GetModbus16
000060  4605              MOV      r5,r0
;;;669    			CanComData->Txbuf[len++] = mycrc;
000062  4621              MOV      r1,r4
000064  1c64              ADDS     r4,r4,#1
000066  4827              LDR      r0,|L1.260|
000068  6800              LDR      r0,[r0,#0]  ; CanComData
00006a  5445              STRB     r5,[r0,r1]
;;;670    			CanComData->Txbuf[len++] = mycrc>>8;
00006c  122a              ASRS     r2,r5,#8
00006e  4621              MOV      r1,r4
000070  1c64              ADDS     r4,r4,#1
000072  4824              LDR      r0,|L1.260|
000074  6800              LDR      r0,[r0,#0]  ; CanComData
000076  5442              STRB     r2,[r0,r1]
;;;671    			
;;;672    			SendCanbuf(EepromData.CanID,CanComData->Txbuf,len);
000078  4924              LDR      r1,|L1.268|
00007a  8908              LDRH     r0,[r1,#8]  ; EepromData
00007c  4622              MOV      r2,r4
00007e  4921              LDR      r1,|L1.260|
000080  6809              LDR      r1,[r1,#0]  ; CanComData
000082  f7fffffe          BL       SendCanbuf
;;;673    			DelayTim++;
000086  4820              LDR      r0,|L1.264|
000088  8800              LDRH     r0,[r0,#0]  ; DelayTim
00008a  1c40              ADDS     r0,r0,#1
00008c  491e              LDR      r1,|L1.264|
00008e  8008              STRH     r0,[r1,#0]
000090  e037              B        |L1.258|
                  |L1.146|
;;;674    		}else{
;;;675    			DelayTim++;
000092  481d              LDR      r0,|L1.264|
000094  8800              LDRH     r0,[r0,#0]  ; DelayTim
000096  1c40              ADDS     r0,r0,#1
000098  491b              LDR      r1,|L1.264|
00009a  8008              STRH     r0,[r1,#0]
;;;676    			if(DelayTim >= 2000){
00009c  4608              MOV      r0,r1
00009e  8800              LDRH     r0,[r0,#0]  ; DelayTim
0000a0  f5b06ffa          CMP      r0,#0x7d0
0000a4  db2d              BLT      |L1.258|
;;;677    				DelayTim = 0;				
0000a6  2000              MOVS     r0,#0
0000a8  8008              STRH     r0,[r1,#0]
;;;678    				bsp_LedOff(iGreenLed);
0000aa  f7fffffe          BL       bsp_LedOff
;;;679    				bsp_LedOn(iRedLed);				
0000ae  2001              MOVS     r0,#1
0000b0  f7fffffe          BL       bsp_LedOn
;;;680    				MCUSoft_RST();
0000b4  bf00              NOP      
0000b6  2001              MOVS     r0,#1
0000b8  f3808813          MSR      FAULTMASK,r0
0000bc  bf00              NOP      
0000be  bf00              NOP      
0000c0  f3bf8f4f          DSB      
0000c4  4812              LDR      r0,|L1.272|
0000c6  6800              LDR      r0,[r0,#0]
0000c8  f40060e0          AND      r0,r0,#0x700
0000cc  4911              LDR      r1,|L1.276|
0000ce  4308              ORRS     r0,r0,r1
0000d0  1d00              ADDS     r0,r0,#4
0000d2  490f              LDR      r1,|L1.272|
0000d4  6008              STR      r0,[r1,#0]
0000d6  f3bf8f4f          DSB      
0000da  bf00              NOP      
0000dc  bf00              NOP      
                  |L1.222|
0000de  e7fe              B        |L1.222|
                  |L1.224|
;;;681    				while(1);
;;;682    				//can_Init();
;;;683    				
;;;684    			}
;;;685    		}
;;;686    	}else{
;;;687    		DelayTim = 0;
0000e0  2000              MOVS     r0,#0
0000e2  4909              LDR      r1,|L1.264|
0000e4  8008              STRH     r0,[r1,#0]
;;;688    		CanComData->OnlineTim--;
0000e6  4807              LDR      r0,|L1.260|
0000e8  6800              LDR      r0,[r0,#0]  ; CanComData
0000ea  f5005080          ADD      r0,r0,#0x1000
0000ee  f8b0040c          LDRH     r0,[r0,#0x40c]
0000f2  1e40              SUBS     r0,r0,#1
0000f4  b281              UXTH     r1,r0
0000f6  4803              LDR      r0,|L1.260|
0000f8  6800              LDR      r0,[r0,#0]  ; CanComData
0000fa  f5005080          ADD      r0,r0,#0x1000
0000fe  f8a0140c          STRH     r1,[r0,#0x40c]
                  |L1.258|
;;;689    	}		
;;;690    }//CanBreath
000102  bd70              POP      {r4-r6,pc}
;;;691    
                          ENDP

                  |L1.260|
                          DCD      CanComData
                  |L1.264|
                          DCD      |symbol_number.45|
                  |L1.268|
                          DCD      EepromData
                  |L1.272|
                          DCD      0xe000ed0c
                  |L1.276|
                          DCD      0x05fa0000

                          AREA ||i.CanSendWave||, CODE, READONLY, ALIGN=2

                  CanSendWave PROC
;;;692    
;;;693    void CanSendWave(void)
000000  b570              PUSH     {r4-r6,lr}
;;;694    {
;;;695    	uint16_t mycrc;
;;;696    	static uint8_t step,bagSize,bagNum,SendTimes;
;;;697    	static uint16_t len,DelayTim;
;;;698    	switch(step){
000002  48a4              LDR      r0,|L2.660|
000004  7800              LDRB     r0,[r0,#0]  ; step
000006  b120              CBZ      r0,|L2.18|
000008  2801              CMP      r0,#1
00000a  d024              BEQ      |L2.86|
00000c  2802              CMP      r0,#2
00000e  d17d              BNE      |L2.268|
000010  e0f6              B        |L2.512|
                  |L2.18|
;;;699    		case 0:
;;;700    			if((CanComData->CanSendFlag & 0x01) && CanComData->CanWaveSampleFlag){				
000012  48a1              LDR      r0,|L2.664|
000014  6800              LDR      r0,[r0,#0]  ; CanComData
000016  f5005080          ADD      r0,r0,#0x1000
00001a  f8900408          LDRB     r0,[r0,#0x408]
00001e  f0000001          AND      r0,r0,#1
000022  b198              CBZ      r0,|L2.76|
000024  489c              LDR      r0,|L2.664|
000026  6800              LDR      r0,[r0,#0]  ; CanComData
000028  f5005080          ADD      r0,r0,#0x1000
00002c  f8900409          LDRB     r0,[r0,#0x409]
000030  b160              CBZ      r0,|L2.76|
;;;701    				step++;	
000032  4898              LDR      r0,|L2.660|
000034  7800              LDRB     r0,[r0,#0]  ; step
000036  1c40              ADDS     r0,r0,#1
000038  4996              LDR      r1,|L2.660|
00003a  7008              STRB     r0,[r1,#0]
;;;702    				bagSize = 21;
00003c  2015              MOVS     r0,#0x15
00003e  4997              LDR      r1,|L2.668|
000040  7008              STRB     r0,[r1,#0]
;;;703    				bagNum = 0;
000042  2000              MOVS     r0,#0
000044  4996              LDR      r1,|L2.672|
000046  7008              STRB     r0,[r1,#0]
;;;704    				SendTimes = 0;
000048  4996              LDR      r1,|L2.676|
00004a  7008              STRB     r0,[r1,#0]
                  |L2.76|
;;;705    			}
;;;706    			if(0 == step){
00004c  4891              LDR      r0,|L2.660|
00004e  7800              LDRB     r0,[r0,#0]  ; step
000050  b900              CBNZ     r0,|L2.84|
;;;707    				break;
000052  e11c              B        |L2.654|
                  |L2.84|
;;;708    			}
;;;709    		case 1:			
000054  bf00              NOP      
                  |L2.86|
;;;710    			if(bagNum<bagSize){			
000056  4892              LDR      r0,|L2.672|
000058  7800              LDRB     r0,[r0,#0]  ; bagNum
00005a  4990              LDR      r1,|L2.668|
00005c  7809              LDRB     r1,[r1,#0]  ; bagSize
00005e  4288              CMP      r0,r1
000060  da7e              BGE      |L2.352|
;;;711    				len = 0;
000062  2000              MOVS     r0,#0
000064  4990              LDR      r1,|L2.680|
000066  8008              STRH     r0,[r1,#0]
;;;712    				CanComData->Txbuf[len++] = (uint8_t)iCanComHad;
000068  21ff              MOVS     r1,#0xff
00006a  488f              LDR      r0,|L2.680|
00006c  8802              LDRH     r2,[r0,#0]  ; len
00006e  8800              LDRH     r0,[r0,#0]  ; len
000070  1c40              ADDS     r0,r0,#1
000072  4b8d              LDR      r3,|L2.680|
000074  8018              STRH     r0,[r3,#0]
000076  4888              LDR      r0,|L2.664|
000078  6800              LDR      r0,[r0,#0]  ; CanComData
00007a  5481              STRB     r1,[r0,r2]
;;;713    				CanComData->Txbuf[len++] = iCanComHad>>8;
00007c  22cb              MOVS     r2,#0xcb
00007e  4618              MOV      r0,r3
000080  8801              LDRH     r1,[r0,#0]  ; len
000082  8800              LDRH     r0,[r0,#0]  ; len
000084  1c40              ADDS     r0,r0,#1
000086  8018              STRH     r0,[r3,#0]
000088  4883              LDR      r0,|L2.664|
00008a  6800              LDR      r0,[r0,#0]  ; CanComData
00008c  5442              STRB     r2,[r0,r1]
;;;714    				CanComData->Txbuf[len++] = 0xE2;
00008e  22e2              MOVS     r2,#0xe2
000090  4618              MOV      r0,r3
000092  8801              LDRH     r1,[r0,#0]  ; len
000094  8800              LDRH     r0,[r0,#0]  ; len
000096  1c40              ADDS     r0,r0,#1
000098  8018              STRH     r0,[r3,#0]
00009a  487f              LDR      r0,|L2.664|
00009c  6800              LDR      r0,[r0,#0]  ; CanComData
00009e  5442              STRB     r2,[r0,r1]
;;;715    				len++;
0000a0  4618              MOV      r0,r3
0000a2  8800              LDRH     r0,[r0,#0]  ; len
0000a4  1c40              ADDS     r0,r0,#1
0000a6  4619              MOV      r1,r3
0000a8  8008              STRH     r0,[r1,#0]
;;;716    				len++;	
0000aa  4608              MOV      r0,r1
0000ac  8800              LDRH     r0,[r0,#0]  ; len
0000ae  1c40              ADDS     r0,r0,#1
0000b0  8008              STRH     r0,[r1,#0]
;;;717    				CanComData->Txbuf[len++] = bagSize;
0000b2  487a              LDR      r0,|L2.668|
0000b4  7801              LDRB     r1,[r0,#0]  ; bagSize
0000b6  4618              MOV      r0,r3
0000b8  8802              LDRH     r2,[r0,#0]  ; len
0000ba  8800              LDRH     r0,[r0,#0]  ; len
0000bc  1c40              ADDS     r0,r0,#1
0000be  8018              STRH     r0,[r3,#0]
0000c0  4875              LDR      r0,|L2.664|
0000c2  6800              LDR      r0,[r0,#0]  ; CanComData
0000c4  5481              STRB     r1,[r0,r2]
;;;718    				CanComData->Txbuf[len++] = bagNum+1;
0000c6  4876              LDR      r0,|L2.672|
0000c8  7800              LDRB     r0,[r0,#0]  ; bagNum
0000ca  1c40              ADDS     r0,r0,#1
0000cc  b2c1              UXTB     r1,r0
0000ce  4618              MOV      r0,r3
0000d0  8802              LDRH     r2,[r0,#0]  ; len
0000d2  8800              LDRH     r0,[r0,#0]  ; len
0000d4  1c40              ADDS     r0,r0,#1
0000d6  8018              STRH     r0,[r3,#0]
0000d8  486f              LDR      r0,|L2.664|
0000da  6800              LDR      r0,[r0,#0]  ; CanComData
0000dc  5481              STRB     r1,[r0,r2]
;;;719    				if(0 == bagNum){					
0000de  4870              LDR      r0,|L2.672|
0000e0  7800              LDRB     r0,[r0,#0]  ; bagNum
0000e2  bb10              CBNZ     r0,|L2.298|
;;;720    					memcpy(CanComData->Txbuf+len,((uint8_t *)&EepromData.ratio),sizeof(float));
0000e4  486c              LDR      r0,|L2.664|
0000e6  6800              LDR      r0,[r0,#0]  ; CanComData
0000e8  4619              MOV      r1,r3
0000ea  8809              LDRH     r1,[r1,#0]  ; len
0000ec  4408              ADD      r0,r0,r1
0000ee  496f              LDR      r1,|L2.684|
0000f0  6849              LDR      r1,[r1,#4]  ; EepromData
0000f2  6001              STR      r1,[r0,#0]
;;;721    					len += sizeof(float);					
0000f4  4618              MOV      r0,r3
0000f6  8800              LDRH     r0,[r0,#0]  ; len
0000f8  1d00              ADDS     r0,r0,#4
0000fa  4619              MOV      r1,r3
0000fc  8008              STRH     r0,[r1,#0]
;;;722    					memcpy(CanComData->Txbuf+len,((uint8_t *)&CanComData->FaultTim),sizeof(AlarmTimStruct));
0000fe  4866              LDR      r0,|L2.664|
000100  6800              LDR      r0,[r0,#0]  ; CanComData
000102  8809              LDRH     r1,[r1,#0]  ; len
000104  4401              ADD      r1,r1,r0
000106  4864              LDR      r0,|L2.664|
000108  6800              LDR      r0,[r0,#0]  ; CanComData
00010a  e000              B        |L2.270|
                  |L2.268|
00010c  e0bb              B        |L2.646|
                  |L2.270|
00010e  f50050a0          ADD      r0,r0,#0x1400
000112  6982              LDR      r2,[r0,#0x18]
000114  600a              STR      r2,[r1,#0]
000116  69c2              LDR      r2,[r0,#0x1c]
000118  604a              STR      r2,[r1,#4]
00011a  8c00              LDRH     r0,[r0,#0x20]
00011c  8108              STRH     r0,[r1,#8]
;;;723    					len += sizeof(AlarmTimStruct);
00011e  4618              MOV      r0,r3
000120  8800              LDRH     r0,[r0,#0]  ; len
000122  300a              ADDS     r0,r0,#0xa
000124  4619              MOV      r1,r3
000126  8008              STRH     r0,[r1,#0]
000128  e018              B        |L2.348|
                  |L2.298|
;;;724    				}else{
;;;725    					memcpy(CanComData->Txbuf+len,((uint8_t *)CanComData->FaultWave)+(bagNum-1)*512,512);
00012a  4a5d              LDR      r2,|L2.672|
00012c  7812              LDRB     r2,[r2,#0]  ; bagNum
00012e  1e52              SUBS     r2,r2,#1
000130  4b59              LDR      r3,|L2.664|
000132  681b              LDR      r3,[r3,#0]  ; CanComData
000134  f2414522          MOV      r5,#0x1422
000138  442b              ADD      r3,r3,r5
00013a  eb032142          ADD      r1,r3,r2,LSL #9
00013e  4a56              LDR      r2,|L2.664|
000140  6812              LDR      r2,[r2,#0]  ; CanComData
000142  4b59              LDR      r3,|L2.680|
000144  881b              LDRH     r3,[r3,#0]  ; len
000146  18d0              ADDS     r0,r2,r3
000148  f44f7200          MOV      r2,#0x200
00014c  f7fffffe          BL       __aeabi_memcpy
;;;726    					len	+=	512;
000150  4855              LDR      r0,|L2.680|
000152  8800              LDRH     r0,[r0,#0]  ; len
000154  f5007000          ADD      r0,r0,#0x200
000158  4953              LDR      r1,|L2.680|
00015a  8008              STRH     r0,[r1,#0]
                  |L2.348|
;;;727    				}
;;;728    				CanComData->Txbuf[3] = (len-5);
00015c  4852              LDR      r0,|L2.680|
00015e  e000              B        |L2.354|
                  |L2.352|
000160  e03c              B        |L2.476|
                  |L2.354|
000162  7800              LDRB     r0,[r0,#0]  ; len
000164  1f40              SUBS     r0,r0,#5
000166  494c              LDR      r1,|L2.664|
000168  6809              LDR      r1,[r1,#0]  ; CanComData
00016a  70c8              STRB     r0,[r1,#3]
;;;729    				CanComData->Txbuf[4] = (len-5)>>8;
00016c  484e              LDR      r0,|L2.680|
00016e  8800              LDRH     r0,[r0,#0]  ; len
000170  1f40              SUBS     r0,r0,#5
000172  0a00              LSRS     r0,r0,#8
000174  4948              LDR      r1,|L2.664|
000176  6809              LDR      r1,[r1,#0]  ; CanComData
000178  7108              STRB     r0,[r1,#4]
;;;730    				mycrc = CRC_GetModbus16(CanComData->Txbuf, len);
00017a  484b              LDR      r0,|L2.680|
00017c  8801              LDRH     r1,[r0,#0]  ; len
00017e  4846              LDR      r0,|L2.664|
000180  6800              LDR      r0,[r0,#0]  ; CanComData
000182  f7fffffe          BL       CRC_GetModbus16
000186  4604              MOV      r4,r0
;;;731    				CanComData->Txbuf[len++] = mycrc;
000188  4847              LDR      r0,|L2.680|
00018a  8802              LDRH     r2,[r0,#0]  ; len
00018c  8800              LDRH     r0,[r0,#0]  ; len
00018e  1c40              ADDS     r0,r0,#1
000190  4b45              LDR      r3,|L2.680|
000192  8018              STRH     r0,[r3,#0]
000194  4840              LDR      r0,|L2.664|
000196  6800              LDR      r0,[r0,#0]  ; CanComData
000198  5484              STRB     r4,[r0,r2]
;;;732    				CanComData->Txbuf[len++] = mycrc>>8;
00019a  1222              ASRS     r2,r4,#8
00019c  4618              MOV      r0,r3
00019e  8801              LDRH     r1,[r0,#0]  ; len
0001a0  8800              LDRH     r0,[r0,#0]  ; len
0001a2  1c40              ADDS     r0,r0,#1
0001a4  8018              STRH     r0,[r3,#0]
0001a6  483c              LDR      r0,|L2.664|
0001a8  6800              LDR      r0,[r0,#0]  ; CanComData
0001aa  5442              STRB     r2,[r0,r1]
;;;733    				SendCanbuf(EepromData.CanID, CanComData->Txbuf, len);
0001ac  493f              LDR      r1,|L2.684|
0001ae  8908              LDRH     r0,[r1,#8]  ; EepromData
0001b0  4619              MOV      r1,r3
0001b2  880a              LDRH     r2,[r1,#0]  ; len
0001b4  4938              LDR      r1,|L2.664|
0001b6  6809              LDR      r1,[r1,#0]  ; CanComData
0001b8  f7fffffe          BL       SendCanbuf
;;;734    				DelayTim = 0;
0001bc  2000              MOVS     r0,#0
0001be  493c              LDR      r1,|L2.688|
0001c0  8008              STRH     r0,[r1,#0]
;;;735    				CanComData->CanSendWaveBag = 0;
0001c2  2100              MOVS     r1,#0
0001c4  4834              LDR      r0,|L2.664|
0001c6  6800              LDR      r0,[r0,#0]  ; CanComData
0001c8  f5005080          ADD      r0,r0,#0x1000
0001cc  f880140a          STRB     r1,[r0,#0x40a]
;;;736    				step++;
0001d0  4830              LDR      r0,|L2.660|
0001d2  7800              LDRB     r0,[r0,#0]  ; step
0001d4  1c40              ADDS     r0,r0,#1
0001d6  492f              LDR      r1,|L2.660|
0001d8  7008              STRB     r0,[r1,#0]
0001da  e010              B        |L2.510|
                  |L2.476|
;;;737    			}else{
;;;738    				CanComData->CanSendFlag &= ~0x01;
0001dc  482e              LDR      r0,|L2.664|
0001de  6800              LDR      r0,[r0,#0]  ; CanComData
0001e0  f5005080          ADD      r0,r0,#0x1000
0001e4  f8900408          LDRB     r0,[r0,#0x408]
0001e8  f0200101          BIC      r1,r0,#1
0001ec  482a              LDR      r0,|L2.664|
0001ee  6800              LDR      r0,[r0,#0]  ; CanComData
0001f0  f5005080          ADD      r0,r0,#0x1000
0001f4  f8801408          STRB     r1,[r0,#0x408]
;;;739    				step = 0;
0001f8  2000              MOVS     r0,#0
0001fa  4926              LDR      r1,|L2.660|
0001fc  7008              STRB     r0,[r1,#0]
                  |L2.510|
;;;740    			}
;;;741    			break;
0001fe  e046              B        |L2.654|
                  |L2.512|
;;;742    		case 2:
;;;743    			if(bagNum+1 == CanComData->CanSendWaveBag){
000200  4825              LDR      r0,|L2.664|
000202  6800              LDR      r0,[r0,#0]  ; CanComData
000204  f5005080          ADD      r0,r0,#0x1000
000208  f890140a          LDRB     r1,[r0,#0x40a]
00020c  4824              LDR      r0,|L2.672|
00020e  7800              LDRB     r0,[r0,#0]  ; bagNum
000210  1c40              ADDS     r0,r0,#1
000212  4281              CMP      r1,r0
000214  d10d              BNE      |L2.562|
;;;744    				bagNum++;
000216  4822              LDR      r0,|L2.672|
000218  7800              LDRB     r0,[r0,#0]  ; bagNum
00021a  1c40              ADDS     r0,r0,#1
00021c  4920              LDR      r1,|L2.672|
00021e  7008              STRB     r0,[r1,#0]
;;;745    				step--;
000220  481c              LDR      r0,|L2.660|
000222  7800              LDRB     r0,[r0,#0]  ; step
000224  1e40              SUBS     r0,r0,#1
000226  491b              LDR      r1,|L2.660|
000228  7008              STRB     r0,[r1,#0]
;;;746    				SendTimes = 0;
00022a  2000              MOVS     r0,#0
00022c  491d              LDR      r1,|L2.676|
00022e  7008              STRB     r0,[r1,#0]
000230  e028              B        |L2.644|
                  |L2.562|
;;;747    			}else{
;;;748    				DelayTim++;
000232  481f              LDR      r0,|L2.688|
000234  8800              LDRH     r0,[r0,#0]  ; DelayTim
000236  1c40              ADDS     r0,r0,#1
000238  491d              LDR      r1,|L2.688|
00023a  8008              STRH     r0,[r1,#0]
;;;749    				if(DelayTim>=100){					
00023c  4608              MOV      r0,r1
00023e  8800              LDRH     r0,[r0,#0]  ; DelayTim
000240  2864              CMP      r0,#0x64
000242  db1f              BLT      |L2.644|
;;;750    					SendTimes++;
000244  4817              LDR      r0,|L2.676|
000246  7800              LDRB     r0,[r0,#0]  ; SendTimes
000248  1c40              ADDS     r0,r0,#1
00024a  4916              LDR      r1,|L2.676|
00024c  7008              STRB     r0,[r1,#0]
;;;751    					if(SendTimes>=5){
00024e  4608              MOV      r0,r1
000250  7800              LDRB     r0,[r0,#0]  ; SendTimes
000252  2805              CMP      r0,#5
000254  db11              BLT      |L2.634|
;;;752    						CanComData->CanSendFlag &= ~0x01;
000256  4810              LDR      r0,|L2.664|
000258  6800              LDR      r0,[r0,#0]  ; CanComData
00025a  f5005080          ADD      r0,r0,#0x1000
00025e  f8900408          LDRB     r0,[r0,#0x408]
000262  f0200101          BIC      r1,r0,#1
000266  480c              LDR      r0,|L2.664|
000268  6800              LDR      r0,[r0,#0]  ; CanComData
00026a  f5005080          ADD      r0,r0,#0x1000
00026e  f8801408          STRB     r1,[r0,#0x408]
;;;753    						step = 0;
000272  2000              MOVS     r0,#0
000274  4907              LDR      r1,|L2.660|
000276  7008              STRB     r0,[r1,#0]
000278  e004              B        |L2.644|
                  |L2.634|
;;;754    					}else{
;;;755    						step--;
00027a  4806              LDR      r0,|L2.660|
00027c  7800              LDRB     r0,[r0,#0]  ; step
00027e  1e40              SUBS     r0,r0,#1
000280  4904              LDR      r1,|L2.660|
000282  7008              STRB     r0,[r1,#0]
                  |L2.644|
;;;756    					}
;;;757    				}
;;;758    			}			
;;;759    			break;
000284  e003              B        |L2.654|
                  |L2.646|
;;;760    		default:
;;;761    			step = 0;			
000286  2000              MOVS     r0,#0
000288  4902              LDR      r1,|L2.660|
00028a  7008              STRB     r0,[r1,#0]
00028c  bf00              NOP                            ;698
                  |L2.654|
00028e  bf00              NOP                            ;707
;;;762    	}
;;;763    }//CanSendWave
000290  bd70              POP      {r4-r6,pc}
;;;764    /***************************** 安富莱电子 www.armfly.com (END OF FILE) *********************************/
                          ENDP

000292  0000              DCW      0x0000
                  |L2.660|
                          DCD      |symbol_number.46|
                  |L2.664|
                          DCD      CanComData
                  |L2.668|
                          DCD      bagSize
                  |L2.672|
                          DCD      bagNum
                  |L2.676|
                          DCD      SendTimes
                  |L2.680|
                          DCD      |symbol_number.50|
                  |L2.684|
                          DCD      EepromData
                  |L2.688|
                          DCD      |symbol_number.51|

                          AREA ||i.SendCan1Msg||, CODE, READONLY, ALIGN=2

                  SendCan1Msg PROC
;;;72     */
;;;73     uint8_t SendCan1Msg(uint16_t iddata,uint8_t *buf,uint8_t buf_len)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;74     {
000004  4604              MOV      r4,r0
000006  460e              MOV      r6,r1
000008  4615              MOV      r5,r2
;;;75     	uint8_t rt;
;;;76     	/* 向CAN网络发送一包数据, 数据区第1个字节指LED灯序号 */
;;;77     
;;;78     	g_tCanTxMsg.StdId = iddata;
00000a  480b              LDR      r0,|L3.56|
00000c  6004              STR      r4,[r0,#0]  ; g_tCanTxMsg
;;;79     	g_tCanTxMsg.ExtId = 0x01;
00000e  2001              MOVS     r0,#1
000010  4909              LDR      r1,|L3.56|
000012  6048              STR      r0,[r1,#4]  ; g_tCanTxMsg
;;;80     	g_tCanTxMsg.RTR = CAN_RTR_DATA;
000014  2000              MOVS     r0,#0
000016  7248              STRB     r0,[r1,#9]
;;;81     	g_tCanTxMsg.IDE = CAN_ID_STD;
000018  7208              STRB     r0,[r1,#8]
;;;82     	g_tCanTxMsg.DLC = buf_len;
00001a  4608              MOV      r0,r1
00001c  7285              STRB     r5,[r0,#0xa]
;;;83     	memcpy(g_tCanTxMsg.Data,buf,buf_len);
00001e  462a              MOV      r2,r5
000020  4631              MOV      r1,r6
000022  300b              ADDS     r0,r0,#0xb
000024  f7fffffe          BL       __aeabi_memcpy
;;;84     	rt = myCAN_Transmit(CAN1, &g_tCanTxMsg);
000028  4903              LDR      r1,|L3.56|
00002a  4804              LDR      r0,|L3.60|
00002c  f7fffffe          BL       myCAN_Transmit
000030  4607              MOV      r7,r0
;;;85     	
;;;86     	return rt;
000032  4638              MOV      r0,r7
;;;87     }
000034  e8bd81f0          POP      {r4-r8,pc}
;;;88     /*
                          ENDP

                  |L3.56|
                          DCD      g_tCanTxMsg
                  |L3.60|
                          DCD      0x40006400

                          AREA ||i.SendCanMsg||, CODE, READONLY, ALIGN=2

                  SendCanMsg PROC
;;;49     */
;;;50     uint8_t SendCanMsg(uint16_t iddata,uint8_t *buf,uint8_t buf_len)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;51     {
000004  4604              MOV      r4,r0
000006  460e              MOV      r6,r1
000008  4615              MOV      r5,r2
;;;52     	uint8_t rt;
;;;53     	/* 向CAN网络发送一包数据, 数据区第1个字节指LED灯序号 */
;;;54     
;;;55     	g_tCanTxMsg.StdId = iddata;
00000a  480b              LDR      r0,|L4.56|
00000c  6004              STR      r4,[r0,#0]  ; g_tCanTxMsg
;;;56     	g_tCanTxMsg.ExtId = 0x01;
00000e  2001              MOVS     r0,#1
000010  4909              LDR      r1,|L4.56|
000012  6048              STR      r0,[r1,#4]  ; g_tCanTxMsg
;;;57     	g_tCanTxMsg.RTR = CAN_RTR_DATA;
000014  2000              MOVS     r0,#0
000016  7248              STRB     r0,[r1,#9]
;;;58     	g_tCanTxMsg.IDE = CAN_ID_STD;
000018  7208              STRB     r0,[r1,#8]
;;;59     	g_tCanTxMsg.DLC = buf_len;
00001a  4608              MOV      r0,r1
00001c  7285              STRB     r5,[r0,#0xa]
;;;60     	memcpy(g_tCanTxMsg.Data,buf,buf_len);
00001e  462a              MOV      r2,r5
000020  4631              MOV      r1,r6
000022  300b              ADDS     r0,r0,#0xb
000024  f7fffffe          BL       __aeabi_memcpy
;;;61     	rt = CAN_Transmit(CAN1, &g_tCanTxMsg);	
000028  4903              LDR      r1,|L4.56|
00002a  4804              LDR      r0,|L4.60|
00002c  f7fffffe          BL       CAN_Transmit
000030  4607              MOV      r7,r0
;;;62     	return rt;
000032  4638              MOV      r0,r7
;;;63     }
000034  e8bd81f0          POP      {r4-r8,pc}
;;;64     
                          ENDP

                  |L4.56|
                          DCD      g_tCanTxMsg
                  |L4.60|
                          DCD      0x40006400

                          AREA ||i.SendCanbuf||, CODE, READONLY, ALIGN=1

                  SendCanbuf PROC
;;;95     */
;;;96     uint8_t SendCanbuf(uint16_t iddata,uint8_t *buf,uint16_t buf_len)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;97     {
000004  4680              MOV      r8,r0
000006  460f              MOV      r7,r1
000008  4614              MOV      r4,r2
;;;98     	uint8_t rt;
;;;99     	uint16_t i;
;;;100    	//uint16_t DelayTim;
;;;101    	i = 0;
00000a  2500              MOVS     r5,#0
;;;102    	rt = 0;
00000c  2600              MOVS     r6,#0
;;;103    	while(buf_len>8){
00000e  e010              B        |L5.50|
                  |L5.16|
;;;104    		//DelayTim = 0;
;;;105    		do{
000010  bf00              NOP      
                  |L5.18|
;;;106    			rt = SendCan1Msg(iddata,buf+i*8,8);		
000012  eb0701c5          ADD      r1,r7,r5,LSL #3
000016  2208              MOVS     r2,#8
000018  4640              MOV      r0,r8
00001a  f7fffffe          BL       SendCan1Msg
00001e  4606              MOV      r6,r0
;;;107    			IWDG_ReloadCounter();
000020  f7fffffe          BL       IWDG_ReloadCounter
;;;108    			//DelayTim++;
;;;109    		}while(0 != rt);		
000024  2e00              CMP      r6,#0
000026  d1f4              BNE      |L5.18|
;;;110    		buf_len-=8;
000028  f1a40008          SUB      r0,r4,#8
00002c  b284              UXTH     r4,r0
;;;111    		i++;
00002e  1c68              ADDS     r0,r5,#1
000030  b285              UXTH     r5,r0
                  |L5.50|
000032  2c08              CMP      r4,#8                 ;103
000034  dcec              BGT      |L5.16|
;;;112    		
;;;113    	}
;;;114    	if((buf_len)&&(0 == rt)){
000036  b164              CBZ      r4,|L5.82|
000038  b95e              CBNZ     r6,|L5.82|
;;;115    		do{
00003a  bf00              NOP      
                  |L5.60|
;;;116    			rt = SendCan1Msg(iddata,buf+i*8,buf_len);		
00003c  b2e2              UXTB     r2,r4
00003e  eb0701c5          ADD      r1,r7,r5,LSL #3
000042  4640              MOV      r0,r8
000044  f7fffffe          BL       SendCan1Msg
000048  4606              MOV      r6,r0
;;;117    			IWDG_ReloadCounter();			
00004a  f7fffffe          BL       IWDG_ReloadCounter
;;;118    		}while(0 != rt);
00004e  2e00              CMP      r6,#0
000050  d1f4              BNE      |L5.60|
                  |L5.82|
;;;119    		
;;;120    	}
;;;121    	return rt;
000052  4630              MOV      r0,r6
;;;122    
;;;123    /*
;;;124    
;;;125    
;;;126    #if 1
;;;127    	uint8_t rt;
;;;128    	uint16_t i;
;;;129    	i = 0;
;;;130    	while(buf_len>8){
;;;131    		
;;;132    		SendCanMsg(iddata,buf+i*8,8);
;;;133    		do{
;;;134    			rt = CAN_TransmitStatus(CAN1,0);
;;;135    			IWDG_ReloadCounter();
;;;136    		}while(rt != CAN_TxStatus_Ok);
;;;137    		
;;;138    		buf_len-=8;
;;;139    		i++;
;;;140    	}
;;;141    	if(buf_len){
;;;142    		do{
;;;143    			rt = CAN_TransmitStatus(CAN1,0);
;;;144    			IWDG_ReloadCounter();
;;;145    		}while(rt != CAN_TxStatus_Ok);
;;;146    		SendCanMsg(iddata,buf+i*8,buf_len);
;;;147    	}
;;;148    #else
;;;149    	uint16_t i,Delay;
;;;150    	i = 0;
;;;151    	while(buf_len>8){		
;;;152    		SendCanMsg(iddata,buf+i*8,8);
;;;153    		buf_len-=8;
;;;154    		i++;
;;;155    		if((buf_len>8)||buf_len){
;;;156    			for(Delay=0;Delay<100;Delay++){
;;;157    				IWDG_ReloadCounter();
;;;158    			}
;;;159    		}
;;;160    	}
;;;161    	if(buf_len){
;;;162    		SendCanMsg(iddata,buf+i*8,buf_len);
;;;163    	}
;;;164    #endif
;;;165    */
;;;166    	
;;;167    }
000054  e8bd81f0          POP      {r4-r8,pc}
;;;168    
                          ENDP


                          AREA ||i.can_ISR||, CODE, READONLY, ALIGN=2

                  can_ISR PROC
;;;296    */ 
;;;297    void can_ISR(void)
000000  b510              PUSH     {r4,lr}
;;;298    {
;;;299    	uint8_t i;
;;;300    	CAN_Receive(CANx, CAN_FIFO0, &g_tCanRxMsg);
000002  4a2d              LDR      r2,|L6.184|
000004  2100              MOVS     r1,#0
000006  482d              LDR      r0,|L6.188|
000008  f7fffffe          BL       CAN_Receive
;;;301    	if(g_tCanRxMsg.IDE == CAN_ID_STD){		
00000c  482a              LDR      r0,|L6.184|
00000e  7a00              LDRB     r0,[r0,#8]  ; g_tCanRxMsg
000010  2800              CMP      r0,#0
000012  d150              BNE      |L6.182|
;;;302    		if(iCanMainID == g_tCanRxMsg.StdId){
000014  4828              LDR      r0,|L6.184|
000016  6800              LDR      r0,[r0,#0]  ; g_tCanRxMsg
000018  f5b07f40          CMP      r0,#0x300
00001c  d121              BNE      |L6.98|
;;;303    			for(i=0;i<g_tCanRxMsg.DLC;i++){
00001e  2400              MOVS     r4,#0
000020  e01a              B        |L6.88|
                  |L6.34|
;;;304    				CanComData->Rxbuf[CanComData->RxbufPt] = g_tCanRxMsg.Data[i];
000022  4825              LDR      r0,|L6.184|
000024  300b              ADDS     r0,r0,#0xb
000026  5d01              LDRB     r1,[r0,r4]
000028  4825              LDR      r0,|L6.192|
00002a  6800              LDR      r0,[r0,#0]  ; CanComData
00002c  f8b02c00          LDRH     r2,[r0,#0xc00]
000030  4823              LDR      r0,|L6.192|
000032  6800              LDR      r0,[r0,#0]  ; CanComData
000034  f5006000          ADD      r0,r0,#0x800
000038  5481              STRB     r1,[r0,r2]
;;;305    				CanComData->RxbufPt = FIFO_pointer(CanComData->RxbufPt, 1, iCanRxSize);
00003a  4921              LDR      r1,|L6.192|
00003c  6809              LDR      r1,[r1,#0]  ; CanComData
00003e  f8b10c00          LDRH     r0,[r1,#0xc00]
000042  f44f6280          MOV      r2,#0x400
000046  2101              MOVS     r1,#1
000048  f7fffffe          BL       FIFO_pointer
00004c  491c              LDR      r1,|L6.192|
00004e  6809              LDR      r1,[r1,#0]  ; CanComData
000050  f8a10c00          STRH     r0,[r1,#0xc00]
000054  1c60              ADDS     r0,r4,#1              ;303
000056  b2c4              UXTB     r4,r0                 ;303
                  |L6.88|
000058  4817              LDR      r0,|L6.184|
00005a  7a80              LDRB     r0,[r0,#0xa]          ;303  ; g_tCanRxMsg
00005c  42a0              CMP      r0,r4                 ;303
00005e  dce0              BGT      |L6.34|
000060  e029              B        |L6.182|
                  |L6.98|
;;;306    			}
;;;307    		
;;;308    		}else if(iCanSetID == g_tCanRxMsg.StdId){
000062  4815              LDR      r0,|L6.184|
000064  6800              LDR      r0,[r0,#0]  ; g_tCanRxMsg
000066  f24031f1          MOV      r1,#0x3f1
00006a  4288              CMP      r0,r1
00006c  d123              BNE      |L6.182|
;;;309    			for(i=0;i<g_tCanRxMsg.DLC;i++){
00006e  2400              MOVS     r4,#0
000070  e01d              B        |L6.174|
                  |L6.114|
;;;310    				CanComData->SetRxbuf[CanComData->SetRxbufPt] = g_tCanRxMsg.Data[i];
000072  4811              LDR      r0,|L6.184|
000074  300b              ADDS     r0,r0,#0xb
000076  5d01              LDRB     r1,[r0,r4]
000078  4811              LDR      r0,|L6.192|
00007a  6800              LDR      r0,[r0,#0]  ; CanComData
00007c  f5005080          ADD      r0,r0,#0x1000
000080  8882              LDRH     r2,[r0,#4]
000082  480f              LDR      r0,|L6.192|
000084  6800              LDR      r0,[r0,#0]  ; CanComData
000086  f6004004          ADD      r0,r0,#0xc04
00008a  5481              STRB     r1,[r0,r2]
;;;311    				CanComData->SetRxbufPt = FIFO_pointer(CanComData->SetRxbufPt, 1, iCanRxSize);
00008c  490c              LDR      r1,|L6.192|
00008e  6809              LDR      r1,[r1,#0]  ; CanComData
000090  f5015180          ADD      r1,r1,#0x1000
000094  8888              LDRH     r0,[r1,#4]
000096  f44f6280          MOV      r2,#0x400
00009a  2101              MOVS     r1,#1
00009c  f7fffffe          BL       FIFO_pointer
0000a0  4907              LDR      r1,|L6.192|
0000a2  6809              LDR      r1,[r1,#0]  ; CanComData
0000a4  f5015180          ADD      r1,r1,#0x1000
0000a8  8088              STRH     r0,[r1,#4]
0000aa  1c60              ADDS     r0,r4,#1              ;309
0000ac  b2c4              UXTB     r4,r0                 ;309
                  |L6.174|
0000ae  4802              LDR      r0,|L6.184|
0000b0  7a80              LDRB     r0,[r0,#0xa]          ;309  ; g_tCanRxMsg
0000b2  42a0              CMP      r0,r4                 ;309
0000b4  dcdd              BGT      |L6.114|
                  |L6.182|
;;;312    			}
;;;313    		
;;;314    		}
;;;315    		
;;;316    	}
;;;317    }//can_ISR
0000b6  bd10              POP      {r4,pc}
;;;318    /*
                          ENDP

                  |L6.184|
                          DCD      g_tCanRxMsg
                  |L6.188|
                          DCD      0x40006400
                  |L6.192|
                          DCD      CanComData

                          AREA ||i.can_Init||, CODE, READONLY, ALIGN=2

                  can_Init PROC
;;;177    */
;;;178    void can_Init(void)
000000  b500              PUSH     {lr}
;;;179    {
000002  b089              SUB      sp,sp,#0x24
;;;180    	GPIO_InitTypeDef  GPIO_InitStructure;
;;;181    	CAN_InitTypeDef        CAN_InitStructure;
;;;182    	CAN_FilterInitTypeDef  CAN_FilterInitStructure;
;;;183    
;;;184    	/* CAN GPIOs 配置*/
;;;185    	/* 使能GPIO时钟 */
;;;186    	RCC_AHB1PeriphClockCmd(CAN_GPIO_TX_CLK|CAN_GPIO_RX_CLK, ENABLE);
000004  2101              MOVS     r1,#1
000006  2008              MOVS     r0,#8
000008  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;187    
;;;188    	/* 引脚映射为CAN功能  */
;;;189    	GPIO_PinAFConfig(CAN_GPIO_RX_PORT, CAN_RX_SOURCE, CAN_AF_PORT);
00000c  2209              MOVS     r2,#9
00000e  2100              MOVS     r1,#0
000010  483e              LDR      r0,|L7.268|
000012  f7fffffe          BL       GPIO_PinAFConfig
;;;190    	GPIO_PinAFConfig(CAN_GPIO_TX_PORT, CAN_TX_SOURCE, CAN_AF_PORT); 
000016  2209              MOVS     r2,#9
000018  2101              MOVS     r1,#1
00001a  483c              LDR      r0,|L7.268|
00001c  f7fffffe          BL       GPIO_PinAFConfig
;;;191    
;;;192    	/* 配置 CAN RX 和 TX 引脚 */
;;;193    	GPIO_InitStructure.GPIO_Pin = CAN_RX_PIN;
000020  2001              MOVS     r0,#1
000022  9007              STR      r0,[sp,#0x1c]
;;;194    	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000024  2002              MOVS     r0,#2
000026  f88d0020          STRB     r0,[sp,#0x20]
;;;195    	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
00002a  f88d0021          STRB     r0,[sp,#0x21]
;;;196    	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00002e  2000              MOVS     r0,#0
000030  f88d0022          STRB     r0,[sp,#0x22]
;;;197    	GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_UP;
000034  2001              MOVS     r0,#1
000036  f88d0023          STRB     r0,[sp,#0x23]
;;;198    	GPIO_Init(CAN_GPIO_RX_PORT, &GPIO_InitStructure);
00003a  a907              ADD      r1,sp,#0x1c
00003c  4833              LDR      r0,|L7.268|
00003e  f7fffffe          BL       GPIO_Init
;;;199    
;;;200    	GPIO_InitStructure.GPIO_Pin = CAN_TX_PIN;
000042  2002              MOVS     r0,#2
000044  9007              STR      r0,[sp,#0x1c]
;;;201    	GPIO_Init(CAN_GPIO_TX_PORT, &GPIO_InitStructure);
000046  a907              ADD      r1,sp,#0x1c
000048  4830              LDR      r0,|L7.268|
00004a  f7fffffe          BL       GPIO_Init
;;;202    
;;;203    	/* CAN配置*/  
;;;204    	/* 使能CAN时钟 */
;;;205    	RCC_APB1PeriphClockCmd(CAN_CLK, ENABLE);
00004e  2101              MOVS     r1,#1
000050  0648              LSLS     r0,r1,#25
000052  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;206    
;;;207    	/* 复位CAN寄存器 */
;;;208    	CAN_DeInit(CANx);
000056  482e              LDR      r0,|L7.272|
000058  f7fffffe          BL       CAN_DeInit
;;;209    	
;;;210    	/*
;;;211    		TTCM = time triggered communication mode
;;;212    		ABOM = automatic bus-off management 
;;;213    		AWUM = automatic wake-up mode
;;;214    		NART = no automatic retransmission
;;;215    		RFLM = receive FIFO locked mode 
;;;216    		TXFP = transmit FIFO priority		
;;;217    	*/
;;;218    	CAN_InitStructure.CAN_TTCM = DISABLE;			/* 禁止时间触发模式（不生成时间戳), T  */
00005c  2000              MOVS     r0,#0
00005e  f88d0016          STRB     r0,[sp,#0x16]
;;;219    	CAN_InitStructure.CAN_ABOM = DISABLE;			/* 禁止自动总线关闭管理 */
000062  f88d0017          STRB     r0,[sp,#0x17]
;;;220    	CAN_InitStructure.CAN_AWUM = DISABLE;			/* 禁止自动唤醒模式 */
000066  f88d0018          STRB     r0,[sp,#0x18]
;;;221    	CAN_InitStructure.CAN_NART = DISABLE;			/* 禁止仲裁丢失或出错后的自动重传功能 */
00006a  f88d0019          STRB     r0,[sp,#0x19]
;;;222    	CAN_InitStructure.CAN_RFLM = DISABLE;			/* 禁止接收FIFO加锁模式 */
00006e  f88d001a          STRB     r0,[sp,#0x1a]
;;;223    	CAN_InitStructure.CAN_TXFP = DISABLE;			/* 禁止传输FIFO优先级 */
000072  f88d001b          STRB     r0,[sp,#0x1b]
;;;224    	CAN_InitStructure.CAN_Mode = CAN_Mode_Normal;	/* 设置CAN为正常工作模式 */
000076  f88d0012          STRB     r0,[sp,#0x12]
;;;225    	
;;;226    	/* 
;;;227    		CAN 波特率 = RCC_APB1Periph_CAN1 / Prescaler / (SJW + BS1 + BS2);
;;;228    		
;;;229    		SJW = synchronisation_jump_width 
;;;230    		BS = bit_segment
;;;231    		
;;;232    		本例中，设置CAN波特率为200Kbps		
;;;233    		CAN 波特率 = 420000000 / 42 / (1 + 3 + 1) / = 200K		
;;;234    	*/
;;;235    	CAN_InitStructure.CAN_SJW = CAN_SJW_1tq;
00007a  f88d0013          STRB     r0,[sp,#0x13]
;;;236    	CAN_InitStructure.CAN_BS1 = CAN_BS1_3tq;
00007e  2002              MOVS     r0,#2
000080  f88d0014          STRB     r0,[sp,#0x14]
;;;237    	CAN_InitStructure.CAN_BS2 = CAN_BS2_1tq;
000084  2000              MOVS     r0,#0
000086  f88d0015          STRB     r0,[sp,#0x15]
;;;238    	CAN_InitStructure.CAN_Prescaler = 42;
00008a  202a              MOVS     r0,#0x2a
00008c  f8ad0010          STRH     r0,[sp,#0x10]
;;;239    	CAN_Init(CANx, &CAN_InitStructure);
000090  a904              ADD      r1,sp,#0x10
000092  481f              LDR      r0,|L7.272|
000094  f7fffffe          BL       CAN_Init
;;;240    	
;;;241    	/* 设置CAN滤波器0 */
;;;242    	CAN_FilterInitStructure.CAN_FilterNumber = 0;		/* 滤波器序号，0-13，共14个滤波器 */
000098  2000              MOVS     r0,#0
00009a  f88d000a          STRB     r0,[sp,#0xa]
;;;243    	CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask;		/* 滤波器模式，设置ID掩码模式 */
00009e  f88d000b          STRB     r0,[sp,#0xb]
;;;244    	CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_32bit;	/* 32位滤波 */
0000a2  2001              MOVS     r0,#1
0000a4  f88d000c          STRB     r0,[sp,#0xc]
;;;245    	CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0000;					/* 掩码后ID的高16bit */
0000a8  2000              MOVS     r0,#0
0000aa  f8ad0000          STRH     r0,[sp,#0]
;;;246    	CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;					/* 掩码后ID的低16bit */
0000ae  f8ad0002          STRH     r0,[sp,#2]
;;;247    	CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x0000;				/* ID掩码值高16bit */
0000b2  f8ad0004          STRH     r0,[sp,#4]
;;;248    	CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x00000;				/* ID掩码值低16bit */
0000b6  f8ad0006          STRH     r0,[sp,#6]
;;;249    	CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_FIFO0;		/* 滤波器绑定FIFO 0 */
0000ba  f8ad0008          STRH     r0,[sp,#8]
;;;250    	CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;				/* 使能滤波器 */
0000be  2001              MOVS     r0,#1
0000c0  f88d000d          STRB     r0,[sp,#0xd]
;;;251    	CAN_FilterInit(&CAN_FilterInitStructure);
0000c4  4668              MOV      r0,sp
0000c6  f7fffffe          BL       CAN_FilterInit
;;;252    
;;;253    	/* 填充发送参数， 也可以再每次发送的时候填 */
;;;254    	g_tCanTxMsg.StdId = 0x321;
0000ca  f2403021          MOV      r0,#0x321
0000ce  4911              LDR      r1,|L7.276|
0000d0  6008              STR      r0,[r1,#0]  ; g_tCanTxMsg
;;;255    	g_tCanTxMsg.ExtId = 0x01;
0000d2  2001              MOVS     r0,#1
0000d4  6048              STR      r0,[r1,#4]  ; g_tCanTxMsg
;;;256    	g_tCanTxMsg.RTR = CAN_RTR_DATA;
0000d6  2000              MOVS     r0,#0
0000d8  7248              STRB     r0,[r1,#9]
;;;257    	g_tCanTxMsg.IDE = CAN_ID_STD;
0000da  7208              STRB     r0,[r1,#8]
;;;258    	g_tCanTxMsg.DLC = 1;
0000dc  2001              MOVS     r0,#1
0000de  7288              STRB     r0,[r1,#0xa]
;;;259    	CanComData->RxbufPt = 0;
0000e0  2000              MOVS     r0,#0
0000e2  490d              LDR      r1,|L7.280|
0000e4  6809              LDR      r1,[r1,#0]  ; CanComData
0000e6  f8a10c00          STRH     r0,[r1,#0xc00]
;;;260    	CanComData->RxbufBt = 0;
0000ea  490b              LDR      r1,|L7.280|
0000ec  6809              LDR      r1,[r1,#0]  ; CanComData
0000ee  f8a10c02          STRH     r0,[r1,#0xc02]
;;;261    	CanComData->SetRxbufBt = 0;
0000f2  2100              MOVS     r1,#0
0000f4  4808              LDR      r0,|L7.280|
0000f6  6800              LDR      r0,[r0,#0]  ; CanComData
0000f8  f5005080          ADD      r0,r0,#0x1000
0000fc  80c1              STRH     r1,[r0,#6]
;;;262    	CanComData->SetRxbufPt = 0;
0000fe  4806              LDR      r0,|L7.280|
000100  6800              LDR      r0,[r0,#0]  ; CanComData
000102  f5005080          ADD      r0,r0,#0x1000
000106  8081              STRH     r1,[r0,#4]
;;;263    }     
000108  b009              ADD      sp,sp,#0x24
00010a  bd00              POP      {pc}
;;;264    
                          ENDP

                  |L7.268|
                          DCD      0x40020c00
                  |L7.272|
                          DCD      0x40006400
                  |L7.276|
                          DCD      g_tCanTxMsg
                  |L7.280|
                          DCD      CanComData

                          AREA ||i.can_NVIC_Config||, CODE, READONLY, ALIGN=2

                  can_NVIC_Config PROC
;;;272    */  
;;;273    void can_NVIC_Config(void)
000000  b508              PUSH     {r3,lr}
;;;274    {
;;;275    	NVIC_InitTypeDef  NVIC_InitStructure;
;;;276    	
;;;277    	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_0);
000002  f44f60e0          MOV      r0,#0x700
000006  f7fffffe          BL       NVIC_PriorityGroupConfig
;;;278    	
;;;279    	NVIC_InitStructure.NVIC_IRQChannel = CAN1_RX0_IRQn;;
00000a  2014              MOVS     r0,#0x14
00000c  f88d0000          STRB     r0,[sp,#0]
;;;280    	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0x0;
000010  2000              MOVS     r0,#0
000012  f88d0001          STRB     r0,[sp,#1]
;;;281    	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0x0;
000016  f88d0002          STRB     r0,[sp,#2]
;;;282    	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
00001a  2001              MOVS     r0,#1
00001c  f88d0003          STRB     r0,[sp,#3]
;;;283    	NVIC_Init(&NVIC_InitStructure);
000020  4668              MOV      r0,sp
000022  f7fffffe          BL       NVIC_Init
;;;284    	
;;;285    	/* CAN FIFO0 消息接收中断使能 */ 
;;;286    	CAN_ITConfig(CANx, CAN_IT_FMP0, ENABLE);	
000026  2201              MOVS     r2,#1
000028  2102              MOVS     r1,#2
00002a  4802              LDR      r0,|L8.52|
00002c  f7fffffe          BL       CAN_ITConfig
;;;287    }
000030  bd08              POP      {r3,pc}
;;;288    
                          ENDP

000032  0000              DCW      0x0000
                  |L8.52|
                          DCD      0x40006400

                          AREA ||i.can_SetTask||, CODE, READONLY, ALIGN=2

                  can_SetTask PROC
;;;493    */ 
;;;494    void can_SetTask(void)
000000  b570              PUSH     {r4-r6,lr}
;;;495    {
;;;496    	uint16_t i,bt,data16;
;;;497    	//uint8_t *bt8;
;;;498    	static uint8_t step,DelayTim;
;;;499    	static uint16_t len;
;;;500    	switch(step){
000002  48fe              LDR      r0,|L9.1020|
000004  7800              LDRB     r0,[r0,#0]  ; step
000006  b120              CBZ      r0,|L9.18|
000008  2801              CMP      r0,#1
00000a  d049              BEQ      |L9.160|
00000c  2802              CMP      r0,#2
00000e  d17d              BNE      |L9.268|
000010  e0b9              B        |L9.390|
                  |L9.18|
;;;501    		case 0:	
;;;502    			
;;;503    			while(FIFO_length(CanComData->SetRxbufBt, CanComData->SetRxbufPt, iCanRxSize)>=2){
000012  e033              B        |L9.124|
                  |L9.20|
;;;504    				bt = CanComData->SetRxbufBt;
000014  48fa              LDR      r0,|L9.1024|
000016  6800              LDR      r0,[r0,#0]  ; CanComData
000018  f5005080          ADD      r0,r0,#0x1000
00001c  88c4              LDRH     r4,[r0,#6]
;;;505    				data16 = CanComData->SetRxbuf[bt];
00001e  48f8              LDR      r0,|L9.1024|
000020  6800              LDR      r0,[r0,#0]  ; CanComData
000022  f6004004          ADD      r0,r0,#0xc04
000026  5d05              LDRB     r5,[r0,r4]
;;;506    				bt = FIFO_pointer(bt, 1, iCanRxSize);
000028  f44f6280          MOV      r2,#0x400
00002c  2101              MOVS     r1,#1
00002e  4620              MOV      r0,r4
000030  f7fffffe          BL       FIFO_pointer
000034  4604              MOV      r4,r0
;;;507    				data16 |= (CanComData->SetRxbuf[bt]<<8);
000036  48f2              LDR      r0,|L9.1024|
000038  6800              LDR      r0,[r0,#0]  ; CanComData
00003a  f6004004          ADD      r0,r0,#0xc04
00003e  5d00              LDRB     r0,[r0,r4]
000040  ea452500          ORR      r5,r5,r0,LSL #8
;;;508    				if(iCanSetComHad == data16){
000044  f64d30ff          MOV      r0,#0xdbff
000048  4285              CMP      r5,r0
00004a  d108              BNE      |L9.94|
;;;509    					step++;
00004c  48eb              LDR      r0,|L9.1020|
00004e  7800              LDRB     r0,[r0,#0]  ; step
000050  1c40              ADDS     r0,r0,#1
000052  49ea              LDR      r1,|L9.1020|
000054  7008              STRB     r0,[r1,#0]
;;;510    					DelayTim = 0;
000056  2000              MOVS     r0,#0
000058  49ea              LDR      r1,|L9.1028|
00005a  7008              STRB     r0,[r1,#0]
;;;511    					break;
00005c  e01e              B        |L9.156|
                  |L9.94|
;;;512    				}else{
;;;513    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, 1, iCanRxSize);
00005e  49e8              LDR      r1,|L9.1024|
000060  6809              LDR      r1,[r1,#0]  ; CanComData
000062  f5015180          ADD      r1,r1,#0x1000
000066  88c8              LDRH     r0,[r1,#6]
000068  f44f6280          MOV      r2,#0x400
00006c  2101              MOVS     r1,#1
00006e  f7fffffe          BL       FIFO_pointer
000072  49e3              LDR      r1,|L9.1024|
000074  6809              LDR      r1,[r1,#0]  ; CanComData
000076  f5015180          ADD      r1,r1,#0x1000
00007a  80c8              STRH     r0,[r1,#6]
                  |L9.124|
00007c  4ae0              LDR      r2,|L9.1024|
00007e  6812              LDR      r2,[r2,#0]            ;503  ; CanComData
000080  f5025280          ADD      r2,r2,#0x1000         ;503
000084  8891              LDRH     r1,[r2,#4]            ;503
000086  4ade              LDR      r2,|L9.1024|
000088  6812              LDR      r2,[r2,#0]            ;503  ; CanComData
00008a  f5025280          ADD      r2,r2,#0x1000         ;503
00008e  88d0              LDRH     r0,[r2,#6]            ;503
000090  f44f6280          MOV      r2,#0x400             ;503
000094  f7fffffe          BL       FIFO_length
000098  2802              CMP      r0,#2                 ;503
00009a  dabb              BGE      |L9.20|
                  |L9.156|
00009c  bf00              NOP                            ;511
;;;514    				}
;;;515    			}
;;;516    			break;
00009e  e2fd              B        |L9.1692|
                  |L9.160|
;;;517    		case 1:
;;;518    			if(FIFO_length(CanComData->SetRxbufBt, CanComData->SetRxbufPt, iCanRxSize)>=5){
0000a0  4ad7              LDR      r2,|L9.1024|
0000a2  6812              LDR      r2,[r2,#0]  ; CanComData
0000a4  f5025280          ADD      r2,r2,#0x1000
0000a8  8891              LDRH     r1,[r2,#4]
0000aa  4ad5              LDR      r2,|L9.1024|
0000ac  6812              LDR      r2,[r2,#0]  ; CanComData
0000ae  f5025280          ADD      r2,r2,#0x1000
0000b2  88d0              LDRH     r0,[r2,#6]
0000b4  f44f6280          MOV      r2,#0x400
0000b8  f7fffffe          BL       FIFO_length
0000bc  2805              CMP      r0,#5
0000be  db45              BLT      |L9.332|
;;;519    				bt = FIFO_pointer(CanComData->SetRxbufBt, 3, iCanRxSize);
0000c0  49cf              LDR      r1,|L9.1024|
0000c2  6809              LDR      r1,[r1,#0]  ; CanComData
0000c4  f5015180          ADD      r1,r1,#0x1000
0000c8  88c8              LDRH     r0,[r1,#6]
0000ca  f44f6280          MOV      r2,#0x400
0000ce  2103              MOVS     r1,#3
0000d0  f7fffffe          BL       FIFO_pointer
0000d4  4604              MOV      r4,r0
;;;520    				len = CanComData->SetRxbuf[bt];
0000d6  48ca              LDR      r0,|L9.1024|
0000d8  6800              LDR      r0,[r0,#0]  ; CanComData
0000da  f6004004          ADD      r0,r0,#0xc04
0000de  5d00              LDRB     r0,[r0,r4]
0000e0  49c9              LDR      r1,|L9.1032|
0000e2  8008              STRH     r0,[r1,#0]
;;;521    				bt = FIFO_pointer(bt, 1, iCanRxSize);
0000e4  f44f6280          MOV      r2,#0x400
0000e8  2101              MOVS     r1,#1
0000ea  4620              MOV      r0,r4
0000ec  f7fffffe          BL       FIFO_pointer
0000f0  4604              MOV      r4,r0
;;;522    				len |= (CanComData->SetRxbuf[bt]<<8);
0000f2  48c3              LDR      r0,|L9.1024|
0000f4  6800              LDR      r0,[r0,#0]  ; CanComData
0000f6  f6004004          ADD      r0,r0,#0xc04
0000fa  5d00              LDRB     r0,[r0,r4]
0000fc  49c2              LDR      r1,|L9.1032|
0000fe  8809              LDRH     r1,[r1,#0]  ; len
000100  ea412000          ORR      r0,r1,r0,LSL #8
000104  49c0              LDR      r1,|L9.1032|
000106  8008              STRH     r0,[r1,#0]
;;;523    				if(len < 32){
000108  4608              MOV      r0,r1
00010a  e000              B        |L9.270|
                  |L9.268|
00010c  e2c2              B        |L9.1684|
                  |L9.270|
00010e  8800              LDRH     r0,[r0,#0]  ; len
000110  2820              CMP      r0,#0x20
000112  da08              BGE      |L9.294|
;;;524    					DelayTim = 0;
000114  2000              MOVS     r0,#0
000116  49bb              LDR      r1,|L9.1028|
000118  7008              STRB     r0,[r1,#0]
;;;525    					step++;
00011a  48b8              LDR      r0,|L9.1020|
00011c  7800              LDRB     r0,[r0,#0]  ; step
00011e  1c40              ADDS     r0,r0,#1
000120  49b6              LDR      r1,|L9.1020|
000122  7008              STRB     r0,[r1,#0]
000124  e02e              B        |L9.388|
                  |L9.294|
;;;526    				}else{
;;;527    					step = 0;
000126  2000              MOVS     r0,#0
000128  49b4              LDR      r1,|L9.1020|
00012a  7008              STRB     r0,[r1,#0]
;;;528    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, 1, iCanRxSize);
00012c  49b4              LDR      r1,|L9.1024|
00012e  6809              LDR      r1,[r1,#0]  ; CanComData
000130  f5015180          ADD      r1,r1,#0x1000
000134  88c8              LDRH     r0,[r1,#6]
000136  f44f6280          MOV      r2,#0x400
00013a  2101              MOVS     r1,#1
00013c  f7fffffe          BL       FIFO_pointer
000140  49af              LDR      r1,|L9.1024|
000142  6809              LDR      r1,[r1,#0]  ; CanComData
000144  f5015180          ADD      r1,r1,#0x1000
000148  80c8              STRH     r0,[r1,#6]
00014a  e01b              B        |L9.388|
                  |L9.332|
;;;529    				}
;;;530    				
;;;531    			}else{
;;;532    				DelayTim++;
00014c  48ad              LDR      r0,|L9.1028|
00014e  7800              LDRB     r0,[r0,#0]  ; DelayTim
000150  1c40              ADDS     r0,r0,#1
000152  49ac              LDR      r1,|L9.1028|
000154  7008              STRB     r0,[r1,#0]
;;;533    				if(DelayTim>=50){
000156  4608              MOV      r0,r1
000158  7800              LDRB     r0,[r0,#0]  ; DelayTim
00015a  2832              CMP      r0,#0x32
00015c  db12              BLT      |L9.388|
;;;534    					DelayTim = 0;
00015e  2000              MOVS     r0,#0
000160  7008              STRB     r0,[r1,#0]
;;;535    					step = 0;
000162  49a6              LDR      r1,|L9.1020|
000164  7008              STRB     r0,[r1,#0]
;;;536    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, 1, iCanRxSize);
000166  49a6              LDR      r1,|L9.1024|
000168  6809              LDR      r1,[r1,#0]  ; CanComData
00016a  f5015180          ADD      r1,r1,#0x1000
00016e  88c8              LDRH     r0,[r1,#6]
000170  f44f6280          MOV      r2,#0x400
000174  2101              MOVS     r1,#1
000176  f7fffffe          BL       FIFO_pointer
00017a  49a1              LDR      r1,|L9.1024|
00017c  6809              LDR      r1,[r1,#0]  ; CanComData
00017e  f5015180          ADD      r1,r1,#0x1000
000182  80c8              STRH     r0,[r1,#6]
                  |L9.388|
;;;537    				}
;;;538    			}
;;;539    			break;
000184  e28a              B        |L9.1692|
                  |L9.390|
;;;540    		case 2:
;;;541    			if(FIFO_length(CanComData->SetRxbufBt, CanComData->SetRxbufPt, iCanRxSize)>=len+7){
000186  4a9e              LDR      r2,|L9.1024|
000188  6812              LDR      r2,[r2,#0]  ; CanComData
00018a  f5025280          ADD      r2,r2,#0x1000
00018e  8891              LDRH     r1,[r2,#4]
000190  4a9b              LDR      r2,|L9.1024|
000192  6812              LDR      r2,[r2,#0]  ; CanComData
000194  f5025280          ADD      r2,r2,#0x1000
000198  88d0              LDRH     r0,[r2,#6]
00019a  f44f6280          MOV      r2,#0x400
00019e  f7fffffe          BL       FIFO_length
0001a2  4999              LDR      r1,|L9.1032|
0001a4  8809              LDRH     r1,[r1,#0]  ; len
0001a6  1dc9              ADDS     r1,r1,#7
0001a8  4288              CMP      r0,r1
0001aa  db7d              BLT      |L9.680|
;;;542    				bt = CanComData->SetRxbufBt;
0001ac  4894              LDR      r0,|L9.1024|
0001ae  6800              LDR      r0,[r0,#0]  ; CanComData
0001b0  f5005080          ADD      r0,r0,#0x1000
0001b4  88c4              LDRH     r4,[r0,#6]
;;;543    				for(i=0;i<len+7;i++){
0001b6  2600              MOVS     r6,#0
0001b8  e013              B        |L9.482|
                  |L9.442|
;;;544    					CanComData->Displaybuf[i] = CanComData->SetRxbuf[bt];
0001ba  4891              LDR      r0,|L9.1024|
0001bc  6800              LDR      r0,[r0,#0]  ; CanComData
0001be  f6004004          ADD      r0,r0,#0xc04
0001c2  5d00              LDRB     r0,[r0,r4]
0001c4  498e              LDR      r1,|L9.1024|
0001c6  6809              LDR      r1,[r1,#0]  ; CanComData
0001c8  f2410208          MOV      r2,#0x1008
0001cc  4411              ADD      r1,r1,r2
0001ce  5588              STRB     r0,[r1,r6]
;;;545    					bt = FIFO_pointer(bt, 1, iCanRxSize);
0001d0  f44f6280          MOV      r2,#0x400
0001d4  2101              MOVS     r1,#1
0001d6  4620              MOV      r0,r4
0001d8  f7fffffe          BL       FIFO_pointer
0001dc  4604              MOV      r4,r0
0001de  1c70              ADDS     r0,r6,#1              ;543
0001e0  b286              UXTH     r6,r0                 ;543
                  |L9.482|
0001e2  4889              LDR      r0,|L9.1032|
0001e4  8800              LDRH     r0,[r0,#0]            ;543  ; len
0001e6  1dc0              ADDS     r0,r0,#7              ;543
0001e8  4286              CMP      r6,r0                 ;543
0001ea  dbe6              BLT      |L9.442|
;;;546    				}
;;;547    				data16 = CanComData->Displaybuf[len+6];
0001ec  4884              LDR      r0,|L9.1024|
0001ee  6800              LDR      r0,[r0,#0]  ; CanComData
0001f0  f2410108          MOV      r1,#0x1008
0001f4  4401              ADD      r1,r1,r0
0001f6  4884              LDR      r0,|L9.1032|
0001f8  8800              LDRH     r0,[r0,#0]  ; len
0001fa  1d80              ADDS     r0,r0,#6
0001fc  5c0d              LDRB     r5,[r1,r0]
;;;548    				data16 <<= 8;
0001fe  f64f70ff          MOV      r0,#0xffff
000202  ea002505          AND      r5,r0,r5,LSL #8
;;;549    				data16 += CanComData->Displaybuf[len+5];
000206  487e              LDR      r0,|L9.1024|
000208  6800              LDR      r0,[r0,#0]  ; CanComData
00020a  f2410108          MOV      r1,#0x1008
00020e  4401              ADD      r1,r1,r0
000210  487d              LDR      r0,|L9.1032|
000212  8800              LDRH     r0,[r0,#0]  ; len
000214  1d40              ADDS     r0,r0,#5
000216  5c08              LDRB     r0,[r1,r0]
000218  4428              ADD      r0,r0,r5
00021a  b285              UXTH     r5,r0
;;;550    				bt = CRC_GetModbus16(CanComData->Displaybuf, len+5);
00021c  487a              LDR      r0,|L9.1032|
00021e  8800              LDRH     r0,[r0,#0]  ; len
000220  1d40              ADDS     r0,r0,#5
000222  b281              UXTH     r1,r0
000224  4876              LDR      r0,|L9.1024|
000226  6800              LDR      r0,[r0,#0]  ; CanComData
000228  f2410208          MOV      r2,#0x1008
00022c  4410              ADD      r0,r0,r2
00022e  f7fffffe          BL       CRC_GetModbus16
000232  4604              MOV      r4,r0
;;;551    				if(data16 == bt){
000234  42a5              CMP      r5,r4
000236  d17d              BNE      |L9.820|
;;;552    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, len+7, iCanRxSize);
000238  4a73              LDR      r2,|L9.1032|
00023a  8812              LDRH     r2,[r2,#0]  ; len
00023c  1dd2              ADDS     r2,r2,#7
00023e  b291              UXTH     r1,r2
000240  4a6f              LDR      r2,|L9.1024|
000242  6812              LDR      r2,[r2,#0]  ; CanComData
000244  f5025280          ADD      r2,r2,#0x1000
000248  88d0              LDRH     r0,[r2,#6]
00024a  f44f6280          MOV      r2,#0x400
00024e  f7fffffe          BL       FIFO_pointer
000252  496b              LDR      r1,|L9.1024|
000254  6809              LDR      r1,[r1,#0]  ; CanComData
000256  f5015180          ADD      r1,r1,#0x1000
00025a  80c8              STRH     r0,[r1,#6]
;;;553    					switch(CanComData->Displaybuf[2]){
00025c  4868              LDR      r0,|L9.1024|
00025e  6800              LDR      r0,[r0,#0]  ; CanComData
000260  f2410108          MOV      r1,#0x1008
000264  4408              ADD      r0,r0,r1
000266  7880              LDRB     r0,[r0,#2]
000268  2860              CMP      r0,#0x60
00026a  d006              BEQ      |L9.634|
00026c  2861              CMP      r0,#0x61
00026e  d074              BEQ      |L9.858|
000270  2862              CMP      r0,#0x62
000272  d070              BEQ      |L9.854|
000274  2863              CMP      r0,#0x63
000276  d16f              BNE      |L9.856|
000278  e163              B        |L9.1346|
                  |L9.634|
;;;554    						case 0x60:
;;;555    							if(1 == CanComData->Displaybuf[5]){
00027a  4861              LDR      r0,|L9.1024|
00027c  6800              LDR      r0,[r0,#0]  ; CanComData
00027e  f2410108          MOV      r1,#0x1008
000282  4408              ADD      r0,r0,r1
000284  7940              LDRB     r0,[r0,#5]
000286  2801              CMP      r0,#1
000288  d163              BNE      |L9.850|
;;;556    								VerifyFlag = 1;
00028a  4960              LDR      r1,|L9.1036|
00028c  7008              STRB     r0,[r1,#0]
;;;557    								len = 0;
00028e  2000              MOVS     r0,#0
000290  495d              LDR      r1,|L9.1032|
000292  8008              STRH     r0,[r1,#0]
;;;558    								CanComData->Txbuf[len++] = (uint8_t)iCanSetComHad;
000294  21ff              MOVS     r1,#0xff
000296  485c              LDR      r0,|L9.1032|
000298  8802              LDRH     r2,[r0,#0]  ; len
00029a  8800              LDRH     r0,[r0,#0]  ; len
00029c  1c40              ADDS     r0,r0,#1
00029e  4b5a              LDR      r3,|L9.1032|
0002a0  8018              STRH     r0,[r3,#0]
0002a2  4857              LDR      r0,|L9.1024|
0002a4  6800              LDR      r0,[r0,#0]  ; CanComData
0002a6  e000              B        |L9.682|
                  |L9.680|
0002a8  e1d7              B        |L9.1626|
                  |L9.682|
0002aa  5481              STRB     r1,[r0,r2]
;;;559    								CanComData->Txbuf[len++] = iCanSetComHad>>8;
0002ac  21db              MOVS     r1,#0xdb
0002ae  4618              MOV      r0,r3
0002b0  8802              LDRH     r2,[r0,#0]  ; len
0002b2  8800              LDRH     r0,[r0,#0]  ; len
0002b4  1c40              ADDS     r0,r0,#1
0002b6  8018              STRH     r0,[r3,#0]
0002b8  4851              LDR      r0,|L9.1024|
0002ba  6800              LDR      r0,[r0,#0]  ; CanComData
0002bc  5481              STRB     r1,[r0,r2]
;;;560    								CanComData->Txbuf[len++] = CanComData->Displaybuf[2] | 0x80;
0002be  4850              LDR      r0,|L9.1024|
0002c0  6800              LDR      r0,[r0,#0]  ; CanComData
0002c2  f2410108          MOV      r1,#0x1008
0002c6  4408              ADD      r0,r0,r1
0002c8  7880              LDRB     r0,[r0,#2]
0002ca  f0400180          ORR      r1,r0,#0x80
0002ce  4618              MOV      r0,r3
0002d0  8802              LDRH     r2,[r0,#0]  ; len
0002d2  8800              LDRH     r0,[r0,#0]  ; len
0002d4  1c40              ADDS     r0,r0,#1
0002d6  8018              STRH     r0,[r3,#0]
0002d8  4849              LDR      r0,|L9.1024|
0002da  6800              LDR      r0,[r0,#0]  ; CanComData
0002dc  5481              STRB     r1,[r0,r2]
;;;561    								len++;
0002de  4618              MOV      r0,r3
0002e0  8800              LDRH     r0,[r0,#0]  ; len
0002e2  1c40              ADDS     r0,r0,#1
0002e4  4619              MOV      r1,r3
0002e6  8008              STRH     r0,[r1,#0]
;;;562    								len++;
0002e8  4608              MOV      r0,r1
0002ea  8800              LDRH     r0,[r0,#0]  ; len
0002ec  1c40              ADDS     r0,r0,#1
0002ee  8008              STRH     r0,[r1,#0]
;;;563    								CanComData->Txbuf[len++] = 1;
0002f0  2101              MOVS     r1,#1
0002f2  4618              MOV      r0,r3
0002f4  8802              LDRH     r2,[r0,#0]  ; len
0002f6  8800              LDRH     r0,[r0,#0]  ; len
0002f8  1c40              ADDS     r0,r0,#1
0002fa  8018              STRH     r0,[r3,#0]
0002fc  4840              LDR      r0,|L9.1024|
0002fe  6800              LDR      r0,[r0,#0]  ; CanComData
000300  5481              STRB     r1,[r0,r2]
;;;564    								CanComData->Txbuf[3] = (len-5);
000302  4618              MOV      r0,r3
000304  7800              LDRB     r0,[r0,#0]  ; len
000306  1f40              SUBS     r0,r0,#5
000308  493d              LDR      r1,|L9.1024|
00030a  6809              LDR      r1,[r1,#0]  ; CanComData
00030c  70c8              STRB     r0,[r1,#3]
;;;565    								CanComData->Txbuf[4] = (len-5)>>8;
00030e  4618              MOV      r0,r3
000310  8800              LDRH     r0,[r0,#0]  ; len
000312  1f40              SUBS     r0,r0,#5
000314  0a00              LSRS     r0,r0,#8
000316  493a              LDR      r1,|L9.1024|
000318  6809              LDR      r1,[r1,#0]  ; CanComData
00031a  7108              STRB     r0,[r1,#4]
;;;566    								bt = CRC_GetModbus16(CanComData->Txbuf, len);
00031c  4618              MOV      r0,r3
00031e  8801              LDRH     r1,[r0,#0]  ; len
000320  4837              LDR      r0,|L9.1024|
000322  6800              LDR      r0,[r0,#0]  ; CanComData
000324  f7fffffe          BL       CRC_GetModbus16
000328  4604              MOV      r4,r0
;;;567    								CanComData->Txbuf[len++] = bt;
00032a  4837              LDR      r0,|L9.1032|
00032c  8802              LDRH     r2,[r0,#0]  ; len
00032e  8800              LDRH     r0,[r0,#0]  ; len
000330  1c40              ADDS     r0,r0,#1
000332  e000              B        |L9.822|
                  |L9.820|
000334  e17e              B        |L9.1588|
                  |L9.822|
000336  4b34              LDR      r3,|L9.1032|
000338  8018              STRH     r0,[r3,#0]
00033a  4831              LDR      r0,|L9.1024|
00033c  6800              LDR      r0,[r0,#0]  ; CanComData
00033e  5484              STRB     r4,[r0,r2]
;;;568    								CanComData->Txbuf[len++] = bt>>8;
000340  1221              ASRS     r1,r4,#8
000342  4618              MOV      r0,r3
000344  8802              LDRH     r2,[r0,#0]  ; len
000346  8800              LDRH     r0,[r0,#0]  ; len
000348  1c40              ADDS     r0,r0,#1
00034a  8018              STRH     r0,[r3,#0]
00034c  482c              LDR      r0,|L9.1024|
00034e  6800              LDR      r0,[r0,#0]  ; CanComData
000350  5481              STRB     r1,[r0,r2]
                  |L9.850|
;;;569    							}
;;;570    							break;
000352  e162              B        |L9.1562|
000354  e001              B        |L9.858|
                  |L9.854|
000356  e077              B        |L9.1096|
                  |L9.856|
000358  e15b              B        |L9.1554|
                  |L9.858|
;;;571    						case 0x61:
;;;572    							if(1 == CanComData->Displaybuf[5]){
00035a  4829              LDR      r0,|L9.1024|
00035c  6800              LDR      r0,[r0,#0]  ; CanComData
00035e  f2410108          MOV      r1,#0x1008
000362  4408              ADD      r0,r0,r1
000364  7940              LDRB     r0,[r0,#5]
000366  2801              CMP      r0,#1
000368  d16d              BNE      |L9.1094|
;;;573    								
;;;574    								len = 0;
00036a  2000              MOVS     r0,#0
00036c  4926              LDR      r1,|L9.1032|
00036e  8008              STRH     r0,[r1,#0]
;;;575    								CanComData->Txbuf[len++] = (uint8_t)iCanSetComHad;
000370  21ff              MOVS     r1,#0xff
000372  4825              LDR      r0,|L9.1032|
000374  8802              LDRH     r2,[r0,#0]  ; len
000376  8800              LDRH     r0,[r0,#0]  ; len
000378  1c40              ADDS     r0,r0,#1
00037a  4b23              LDR      r3,|L9.1032|
00037c  8018              STRH     r0,[r3,#0]
00037e  4820              LDR      r0,|L9.1024|
000380  6800              LDR      r0,[r0,#0]  ; CanComData
000382  5481              STRB     r1,[r0,r2]
;;;576    								CanComData->Txbuf[len++] = iCanSetComHad>>8;
000384  21db              MOVS     r1,#0xdb
000386  4618              MOV      r0,r3
000388  8802              LDRH     r2,[r0,#0]  ; len
00038a  8800              LDRH     r0,[r0,#0]  ; len
00038c  1c40              ADDS     r0,r0,#1
00038e  8018              STRH     r0,[r3,#0]
000390  481b              LDR      r0,|L9.1024|
000392  6800              LDR      r0,[r0,#0]  ; CanComData
000394  5481              STRB     r1,[r0,r2]
;;;577    								CanComData->Txbuf[len++] = CanComData->Displaybuf[2] | 0x80;
000396  481a              LDR      r0,|L9.1024|
000398  6800              LDR      r0,[r0,#0]  ; CanComData
00039a  f2410108          MOV      r1,#0x1008
00039e  4408              ADD      r0,r0,r1
0003a0  7880              LDRB     r0,[r0,#2]
0003a2  f0400180          ORR      r1,r0,#0x80
0003a6  4618              MOV      r0,r3
0003a8  8802              LDRH     r2,[r0,#0]  ; len
0003aa  8800              LDRH     r0,[r0,#0]  ; len
0003ac  1c40              ADDS     r0,r0,#1
0003ae  8018              STRH     r0,[r3,#0]
0003b0  4813              LDR      r0,|L9.1024|
0003b2  6800              LDR      r0,[r0,#0]  ; CanComData
0003b4  5481              STRB     r1,[r0,r2]
;;;578    								len++;
0003b6  4618              MOV      r0,r3
0003b8  8800              LDRH     r0,[r0,#0]  ; len
0003ba  1c40              ADDS     r0,r0,#1
0003bc  4619              MOV      r1,r3
0003be  8008              STRH     r0,[r1,#0]
;;;579    								len++;
0003c0  4608              MOV      r0,r1
0003c2  8800              LDRH     r0,[r0,#0]  ; len
0003c4  1c40              ADDS     r0,r0,#1
0003c6  8008              STRH     r0,[r1,#0]
;;;580    								memcpy(CanComData->Txbuf+len,(uint8_t *)(&ADCFifo.RMSbuf),sizeof(float));
0003c8  480d              LDR      r0,|L9.1024|
0003ca  6800              LDR      r0,[r0,#0]  ; CanComData
0003cc  8809              LDRH     r1,[r1,#0]  ; len
0003ce  4408              ADD      r0,r0,r1
0003d0  490f              LDR      r1,|L9.1040|
0003d2  6849              LDR      r1,[r1,#4]  ; ADCFifo
0003d4  6001              STR      r1,[r0,#0]
;;;581    								len += sizeof(float);							
0003d6  4618              MOV      r0,r3
0003d8  8800              LDRH     r0,[r0,#0]  ; len
0003da  1d00              ADDS     r0,r0,#4
0003dc  4619              MOV      r1,r3
0003de  8008              STRH     r0,[r1,#0]
;;;582    								CanComData->Txbuf[3] = (len-5);
0003e0  4608              MOV      r0,r1
0003e2  7800              LDRB     r0,[r0,#0]  ; len
0003e4  1f40              SUBS     r0,r0,#5
0003e6  4906              LDR      r1,|L9.1024|
0003e8  6809              LDR      r1,[r1,#0]  ; CanComData
0003ea  70c8              STRB     r0,[r1,#3]
;;;583    								CanComData->Txbuf[4] = (len-5)>>8;
0003ec  4618              MOV      r0,r3
0003ee  8800              LDRH     r0,[r0,#0]  ; len
0003f0  1f40              SUBS     r0,r0,#5
0003f2  0a00              LSRS     r0,r0,#8
0003f4  4902              LDR      r1,|L9.1024|
0003f6  6809              LDR      r1,[r1,#0]  ; CanComData
0003f8  7108              STRB     r0,[r1,#4]
;;;584    								bt = CRC_GetModbus16(CanComData->Txbuf, len);
0003fa  e00b              B        |L9.1044|
                  |L9.1020|
                          DCD      |symbol_number.42|
                  |L9.1024|
                          DCD      CanComData
                  |L9.1028|
                          DCD      DelayTim
                  |L9.1032|
                          DCD      |symbol_number.44|
                  |L9.1036|
                          DCD      VerifyFlag
                  |L9.1040|
                          DCD      ADCFifo
                  |L9.1044|
000414  4618              MOV      r0,r3
000416  8801              LDRH     r1,[r0,#0]  ; len
000418  48a1              LDR      r0,|L9.1696|
00041a  6800              LDR      r0,[r0,#0]  ; CanComData
00041c  f7fffffe          BL       CRC_GetModbus16
000420  4604              MOV      r4,r0
;;;585    								CanComData->Txbuf[len++] = bt;
000422  48a0              LDR      r0,|L9.1700|
000424  8802              LDRH     r2,[r0,#0]  ; len
000426  8800              LDRH     r0,[r0,#0]  ; len
000428  1c40              ADDS     r0,r0,#1
00042a  4b9e              LDR      r3,|L9.1700|
00042c  8018              STRH     r0,[r3,#0]
00042e  489c              LDR      r0,|L9.1696|
000430  6800              LDR      r0,[r0,#0]  ; CanComData
000432  5484              STRB     r4,[r0,r2]
;;;586    								CanComData->Txbuf[len++] = bt>>8;
000434  1222              ASRS     r2,r4,#8
000436  4618              MOV      r0,r3
000438  8801              LDRH     r1,[r0,#0]  ; len
00043a  8800              LDRH     r0,[r0,#0]  ; len
00043c  1c40              ADDS     r0,r0,#1
00043e  8018              STRH     r0,[r3,#0]
000440  4897              LDR      r0,|L9.1696|
000442  6800              LDR      r0,[r0,#0]  ; CanComData
000444  5442              STRB     r2,[r0,r1]
                  |L9.1094|
;;;587    							}
;;;588    							break;
000446  e0e8              B        |L9.1562|
                  |L9.1096|
;;;589    						case 0x62:
;;;590    							if((CanComData->Displaybuf[5]>=1)&&(CanComData->Displaybuf[5]<=128)){
000448  4895              LDR      r0,|L9.1696|
00044a  6800              LDR      r0,[r0,#0]  ; CanComData
00044c  f2410108          MOV      r1,#0x1008
000450  4408              ADD      r0,r0,r1
000452  7940              LDRB     r0,[r0,#5]
000454  2801              CMP      r0,#1
000456  db73              BLT      |L9.1344|
000458  4891              LDR      r0,|L9.1696|
00045a  6800              LDR      r0,[r0,#0]  ; CanComData
00045c  4408              ADD      r0,r0,r1
00045e  7940              LDRB     r0,[r0,#5]
000460  2880              CMP      r0,#0x80
000462  dc6d              BGT      |L9.1344|
;;;591    								EepromData.CanID = 0x300+CanComData->Displaybuf[5];
000464  488e              LDR      r0,|L9.1696|
000466  6800              LDR      r0,[r0,#0]  ; CanComData
000468  4408              ADD      r0,r0,r1
00046a  7940              LDRB     r0,[r0,#5]
00046c  f5007040          ADD      r0,r0,#0x300
000470  498d              LDR      r1,|L9.1704|
000472  8108              STRH     r0,[r1,#8]
;;;592    								EepromSaveFlag = 1;
000474  2001              MOVS     r0,#1
000476  498d              LDR      r1,|L9.1708|
000478  7008              STRB     r0,[r1,#0]
;;;593    								
;;;594    								len = 0;
00047a  2000              MOVS     r0,#0
00047c  4989              LDR      r1,|L9.1700|
00047e  8008              STRH     r0,[r1,#0]
;;;595    								CanComData->Txbuf[len++] = (uint8_t)iCanSetComHad;
000480  22ff              MOVS     r2,#0xff
000482  4608              MOV      r0,r1
000484  8801              LDRH     r1,[r0,#0]  ; len
000486  8800              LDRH     r0,[r0,#0]  ; len
000488  1c40              ADDS     r0,r0,#1
00048a  4b86              LDR      r3,|L9.1700|
00048c  8018              STRH     r0,[r3,#0]
00048e  4884              LDR      r0,|L9.1696|
000490  6800              LDR      r0,[r0,#0]  ; CanComData
000492  5442              STRB     r2,[r0,r1]
;;;596    								CanComData->Txbuf[len++] = iCanSetComHad>>8;
000494  21db              MOVS     r1,#0xdb
000496  4618              MOV      r0,r3
000498  8802              LDRH     r2,[r0,#0]  ; len
00049a  8800              LDRH     r0,[r0,#0]  ; len
00049c  1c40              ADDS     r0,r0,#1
00049e  8018              STRH     r0,[r3,#0]
0004a0  487f              LDR      r0,|L9.1696|
0004a2  6800              LDR      r0,[r0,#0]  ; CanComData
0004a4  5481              STRB     r1,[r0,r2]
;;;597    								CanComData->Txbuf[len++] = CanComData->Displaybuf[2] | 0x80;
0004a6  487e              LDR      r0,|L9.1696|
0004a8  6800              LDR      r0,[r0,#0]  ; CanComData
0004aa  f2410108          MOV      r1,#0x1008
0004ae  4408              ADD      r0,r0,r1
0004b0  7880              LDRB     r0,[r0,#2]
0004b2  f0400180          ORR      r1,r0,#0x80
0004b6  4618              MOV      r0,r3
0004b8  8802              LDRH     r2,[r0,#0]  ; len
0004ba  8800              LDRH     r0,[r0,#0]  ; len
0004bc  1c40              ADDS     r0,r0,#1
0004be  8018              STRH     r0,[r3,#0]
0004c0  4877              LDR      r0,|L9.1696|
0004c2  6800              LDR      r0,[r0,#0]  ; CanComData
0004c4  5481              STRB     r1,[r0,r2]
;;;598    								len++;
0004c6  4618              MOV      r0,r3
0004c8  8800              LDRH     r0,[r0,#0]  ; len
0004ca  1c40              ADDS     r0,r0,#1
0004cc  4619              MOV      r1,r3
0004ce  8008              STRH     r0,[r1,#0]
;;;599    								len++;
0004d0  4608              MOV      r0,r1
0004d2  8800              LDRH     r0,[r0,#0]  ; len
0004d4  1c40              ADDS     r0,r0,#1
0004d6  8008              STRH     r0,[r1,#0]
;;;600    								CanComData->Txbuf[len++] = CanComData->Displaybuf[5];											
0004d8  4871              LDR      r0,|L9.1696|
0004da  6800              LDR      r0,[r0,#0]  ; CanComData
0004dc  f2410108          MOV      r1,#0x1008
0004e0  4408              ADD      r0,r0,r1
0004e2  7941              LDRB     r1,[r0,#5]
0004e4  4618              MOV      r0,r3
0004e6  8802              LDRH     r2,[r0,#0]  ; len
0004e8  8800              LDRH     r0,[r0,#0]  ; len
0004ea  1c40              ADDS     r0,r0,#1
0004ec  8018              STRH     r0,[r3,#0]
0004ee  486c              LDR      r0,|L9.1696|
0004f0  6800              LDR      r0,[r0,#0]  ; CanComData
0004f2  5481              STRB     r1,[r0,r2]
;;;601    								CanComData->Txbuf[3] = (len-5);
0004f4  4618              MOV      r0,r3
0004f6  7800              LDRB     r0,[r0,#0]  ; len
0004f8  1f40              SUBS     r0,r0,#5
0004fa  4969              LDR      r1,|L9.1696|
0004fc  6809              LDR      r1,[r1,#0]  ; CanComData
0004fe  70c8              STRB     r0,[r1,#3]
;;;602    								CanComData->Txbuf[4] = (len-5)>>8;
000500  4618              MOV      r0,r3
000502  8800              LDRH     r0,[r0,#0]  ; len
000504  1f40              SUBS     r0,r0,#5
000506  0a00              LSRS     r0,r0,#8
000508  4965              LDR      r1,|L9.1696|
00050a  6809              LDR      r1,[r1,#0]  ; CanComData
00050c  7108              STRB     r0,[r1,#4]
;;;603    								bt = CRC_GetModbus16(CanComData->Txbuf, len);
00050e  4618              MOV      r0,r3
000510  8801              LDRH     r1,[r0,#0]  ; len
000512  4863              LDR      r0,|L9.1696|
000514  6800              LDR      r0,[r0,#0]  ; CanComData
000516  f7fffffe          BL       CRC_GetModbus16
00051a  4604              MOV      r4,r0
;;;604    								CanComData->Txbuf[len++] = bt;
00051c  4861              LDR      r0,|L9.1700|
00051e  8802              LDRH     r2,[r0,#0]  ; len
000520  8800              LDRH     r0,[r0,#0]  ; len
000522  1c40              ADDS     r0,r0,#1
000524  4b5f              LDR      r3,|L9.1700|
000526  8018              STRH     r0,[r3,#0]
000528  485d              LDR      r0,|L9.1696|
00052a  6800              LDR      r0,[r0,#0]  ; CanComData
00052c  5484              STRB     r4,[r0,r2]
;;;605    								CanComData->Txbuf[len++] = bt>>8;
00052e  1221              ASRS     r1,r4,#8
000530  4618              MOV      r0,r3
000532  8802              LDRH     r2,[r0,#0]  ; len
000534  8800              LDRH     r0,[r0,#0]  ; len
000536  1c40              ADDS     r0,r0,#1
000538  8018              STRH     r0,[r3,#0]
00053a  4859              LDR      r0,|L9.1696|
00053c  6800              LDR      r0,[r0,#0]  ; CanComData
00053e  5481              STRB     r1,[r0,r2]
                  |L9.1344|
;;;606    							}
;;;607    							break;
000540  e06b              B        |L9.1562|
                  |L9.1346|
;;;608    						case 0x63:
;;;609    							if(1 == CanComData->Displaybuf[5]){	
000542  4857              LDR      r0,|L9.1696|
000544  6800              LDR      r0,[r0,#0]  ; CanComData
000546  f2410108          MOV      r1,#0x1008
00054a  4408              ADD      r0,r0,r1
00054c  7940              LDRB     r0,[r0,#5]
00054e  2801              CMP      r0,#1
000550  d15e              BNE      |L9.1552|
;;;610    								len = 0;
000552  2000              MOVS     r0,#0
000554  4953              LDR      r1,|L9.1700|
000556  8008              STRH     r0,[r1,#0]
;;;611    								CanComData->Txbuf[len++] = (uint8_t)iCanSetComHad;
000558  21ff              MOVS     r1,#0xff
00055a  4852              LDR      r0,|L9.1700|
00055c  8802              LDRH     r2,[r0,#0]  ; len
00055e  8800              LDRH     r0,[r0,#0]  ; len
000560  1c40              ADDS     r0,r0,#1
000562  4b50              LDR      r3,|L9.1700|
000564  8018              STRH     r0,[r3,#0]
000566  484e              LDR      r0,|L9.1696|
000568  6800              LDR      r0,[r0,#0]  ; CanComData
00056a  5481              STRB     r1,[r0,r2]
;;;612    								CanComData->Txbuf[len++] = iCanSetComHad>>8;
00056c  21db              MOVS     r1,#0xdb
00056e  4618              MOV      r0,r3
000570  8802              LDRH     r2,[r0,#0]  ; len
000572  8800              LDRH     r0,[r0,#0]  ; len
000574  1c40              ADDS     r0,r0,#1
000576  8018              STRH     r0,[r3,#0]
000578  4849              LDR      r0,|L9.1696|
00057a  6800              LDR      r0,[r0,#0]  ; CanComData
00057c  5481              STRB     r1,[r0,r2]
;;;613    								CanComData->Txbuf[len++] = CanComData->Displaybuf[2] | 0x80;
00057e  4848              LDR      r0,|L9.1696|
000580  6800              LDR      r0,[r0,#0]  ; CanComData
000582  f2410108          MOV      r1,#0x1008
000586  4408              ADD      r0,r0,r1
000588  7880              LDRB     r0,[r0,#2]
00058a  f0400180          ORR      r1,r0,#0x80
00058e  4618              MOV      r0,r3
000590  8802              LDRH     r2,[r0,#0]  ; len
000592  8800              LDRH     r0,[r0,#0]  ; len
000594  1c40              ADDS     r0,r0,#1
000596  8018              STRH     r0,[r3,#0]
000598  4841              LDR      r0,|L9.1696|
00059a  6800              LDR      r0,[r0,#0]  ; CanComData
00059c  5481              STRB     r1,[r0,r2]
;;;614    								len++;
00059e  4618              MOV      r0,r3
0005a0  8800              LDRH     r0,[r0,#0]  ; len
0005a2  1c40              ADDS     r0,r0,#1
0005a4  4619              MOV      r1,r3
0005a6  8008              STRH     r0,[r1,#0]
;;;615    								len++;
0005a8  4608              MOV      r0,r1
0005aa  8800              LDRH     r0,[r0,#0]  ; len
0005ac  1c40              ADDS     r0,r0,#1
0005ae  8008              STRH     r0,[r1,#0]
;;;616    								CanComData->Txbuf[len++] = EepromData.CanID;											
0005b0  483d              LDR      r0,|L9.1704|
0005b2  7a02              LDRB     r2,[r0,#8]  ; EepromData
0005b4  4608              MOV      r0,r1
0005b6  8801              LDRH     r1,[r0,#0]  ; len
0005b8  8800              LDRH     r0,[r0,#0]  ; len
0005ba  1c40              ADDS     r0,r0,#1
0005bc  8018              STRH     r0,[r3,#0]
0005be  4838              LDR      r0,|L9.1696|
0005c0  6800              LDR      r0,[r0,#0]  ; CanComData
0005c2  5442              STRB     r2,[r0,r1]
;;;617    								CanComData->Txbuf[3] = (len-5);
0005c4  4618              MOV      r0,r3
0005c6  7800              LDRB     r0,[r0,#0]  ; len
0005c8  1f40              SUBS     r0,r0,#5
0005ca  4935              LDR      r1,|L9.1696|
0005cc  6809              LDR      r1,[r1,#0]  ; CanComData
0005ce  70c8              STRB     r0,[r1,#3]
;;;618    								CanComData->Txbuf[4] = (len-5)>>8;
0005d0  4618              MOV      r0,r3
0005d2  8800              LDRH     r0,[r0,#0]  ; len
0005d4  1f40              SUBS     r0,r0,#5
0005d6  0a00              LSRS     r0,r0,#8
0005d8  4931              LDR      r1,|L9.1696|
0005da  6809              LDR      r1,[r1,#0]  ; CanComData
0005dc  7108              STRB     r0,[r1,#4]
;;;619    								bt = CRC_GetModbus16(CanComData->Txbuf, len);
0005de  4618              MOV      r0,r3
0005e0  8801              LDRH     r1,[r0,#0]  ; len
0005e2  482f              LDR      r0,|L9.1696|
0005e4  6800              LDR      r0,[r0,#0]  ; CanComData
0005e6  f7fffffe          BL       CRC_GetModbus16
0005ea  4604              MOV      r4,r0
;;;620    								CanComData->Txbuf[len++] = bt;
0005ec  482d              LDR      r0,|L9.1700|
0005ee  8801              LDRH     r1,[r0,#0]  ; len
0005f0  8800              LDRH     r0,[r0,#0]  ; len
0005f2  1c40              ADDS     r0,r0,#1
0005f4  4b2b              LDR      r3,|L9.1700|
0005f6  8018              STRH     r0,[r3,#0]
0005f8  4829              LDR      r0,|L9.1696|
0005fa  6800              LDR      r0,[r0,#0]  ; CanComData
0005fc  5444              STRB     r4,[r0,r1]
;;;621    								CanComData->Txbuf[len++] = bt>>8;
0005fe  1221              ASRS     r1,r4,#8
000600  4618              MOV      r0,r3
000602  8802              LDRH     r2,[r0,#0]  ; len
000604  8800              LDRH     r0,[r0,#0]  ; len
000606  1c40              ADDS     r0,r0,#1
000608  8018              STRH     r0,[r3,#0]
00060a  4825              LDR      r0,|L9.1696|
00060c  6800              LDR      r0,[r0,#0]  ; CanComData
00060e  5481              STRB     r1,[r0,r2]
                  |L9.1552|
;;;622    							}
;;;623    							break;
000610  e003              B        |L9.1562|
                  |L9.1554|
;;;624    						default:
;;;625    							len = 0;							
000612  2000              MOVS     r0,#0
000614  4923              LDR      r1,|L9.1700|
000616  8008              STRH     r0,[r1,#0]
000618  bf00              NOP                            ;553
                  |L9.1562|
00061a  bf00              NOP                            ;570
;;;626    					}
;;;627    					if(len){
00061c  4821              LDR      r0,|L9.1700|
00061e  8800              LDRH     r0,[r0,#0]  ; len
000620  b1b8              CBZ      r0,|L9.1618|
;;;628    						SendCanbuf(iCanSetID,CanComData->Txbuf,len);
000622  4820              LDR      r0,|L9.1700|
000624  8802              LDRH     r2,[r0,#0]  ; len
000626  481e              LDR      r0,|L9.1696|
000628  6801              LDR      r1,[r0,#0]  ; CanComData
00062a  f24030f1          MOV      r0,#0x3f1
00062e  f7fffffe          BL       SendCanbuf
000632  e00e              B        |L9.1618|
                  |L9.1588|
;;;629    					}
;;;630    				}else{
;;;631    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, 1, iCanRxSize);
000634  491a              LDR      r1,|L9.1696|
000636  6809              LDR      r1,[r1,#0]  ; CanComData
000638  f5015180          ADD      r1,r1,#0x1000
00063c  88c8              LDRH     r0,[r1,#6]
00063e  f44f6280          MOV      r2,#0x400
000642  2101              MOVS     r1,#1
000644  f7fffffe          BL       FIFO_pointer
000648  4915              LDR      r1,|L9.1696|
00064a  6809              LDR      r1,[r1,#0]  ; CanComData
00064c  f5015180          ADD      r1,r1,#0x1000
000650  80c8              STRH     r0,[r1,#6]
                  |L9.1618|
;;;632    				}
;;;633    				step = 0;
000652  2000              MOVS     r0,#0
000654  4916              LDR      r1,|L9.1712|
000656  7008              STRB     r0,[r1,#0]
000658  e01b              B        |L9.1682|
                  |L9.1626|
;;;634    			}else{
;;;635    				DelayTim++;
00065a  4816              LDR      r0,|L9.1716|
00065c  7800              LDRB     r0,[r0,#0]  ; DelayTim
00065e  1c40              ADDS     r0,r0,#1
000660  4914              LDR      r1,|L9.1716|
000662  7008              STRB     r0,[r1,#0]
;;;636    				if(DelayTim>=50){
000664  4608              MOV      r0,r1
000666  7800              LDRB     r0,[r0,#0]  ; DelayTim
000668  2832              CMP      r0,#0x32
00066a  db12              BLT      |L9.1682|
;;;637    					DelayTim = 0;
00066c  2000              MOVS     r0,#0
00066e  7008              STRB     r0,[r1,#0]
;;;638    					step = 0;
000670  490f              LDR      r1,|L9.1712|
000672  7008              STRB     r0,[r1,#0]
;;;639    					CanComData->SetRxbufBt = FIFO_pointer(CanComData->SetRxbufBt, 1, iCanRxSize);
000674  490a              LDR      r1,|L9.1696|
000676  6809              LDR      r1,[r1,#0]  ; CanComData
000678  f5015180          ADD      r1,r1,#0x1000
00067c  88c8              LDRH     r0,[r1,#6]
00067e  f44f6280          MOV      r2,#0x400
000682  2101              MOVS     r1,#1
000684  f7fffffe          BL       FIFO_pointer
000688  4905              LDR      r1,|L9.1696|
00068a  6809              LDR      r1,[r1,#0]  ; CanComData
00068c  f5015180          ADD      r1,r1,#0x1000
000690  80c8              STRH     r0,[r1,#6]
                  |L9.1682|
;;;640    				}
;;;641    			}
;;;642    			break;
000692  e003              B        |L9.1692|
                  |L9.1684|
;;;643    		default:
;;;644    			step = 0;
000694  2000              MOVS     r0,#0
000696  4906              LDR      r1,|L9.1712|
000698  7008              STRB     r0,[r1,#0]
00069a  bf00              NOP                            ;500
                  |L9.1692|
00069c  bf00              NOP                            ;516
;;;645    	}
;;;646    
;;;647    	
;;;648    
;;;649    }//can_Task
00069e  bd70              POP      {r4-r6,pc}
;;;650    
                          ENDP

                  |L9.1696|
                          DCD      CanComData
                  |L9.1700|
                          DCD      |symbol_number.44|
                  |L9.1704|
                          DCD      EepromData
                  |L9.1708|
                          DCD      EepromSaveFlag
                  |L9.1712|
                          DCD      |symbol_number.42|
                  |L9.1716|
                          DCD      DelayTim

                          AREA ||i.can_Task||, CODE, READONLY, ALIGN=2

                  can_Task PROC
;;;325    */ 
;;;326    void can_Task(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;327    {
;;;328    	uint16_t i,bt,data16;
;;;329    	uint8_t flag;
;;;330    	static uint8_t step;
;;;331    	static uint16_t len;
;;;332    	switch(step){
000004  48fb              LDR      r0,|L10.1012|
000006  7800              LDRB     r0,[r0,#0]  ; step
000008  b120              CBZ      r0,|L10.20|
00000a  2801              CMP      r0,#1
00000c  d048              BEQ      |L10.160|
00000e  2802              CMP      r0,#2
000010  d17e              BNE      |L10.272|
000012  e0af              B        |L10.372|
                  |L10.20|
;;;333    		case 0:	
;;;334    			flag = 0;
000014  2700              MOVS     r7,#0
;;;335    			while(FIFO_length(CanComData->RxbufBt, CanComData->RxbufPt, iCanRxSize)>=2){
000016  e031              B        |L10.124|
                  |L10.24|
;;;336    				bt = CanComData->RxbufBt;
000018  48f7              LDR      r0,|L10.1016|
00001a  6800              LDR      r0,[r0,#0]  ; CanComData
00001c  f8b04c02          LDRH     r4,[r0,#0xc02]
;;;337    				data16 = CanComData->Rxbuf[bt];
000020  48f5              LDR      r0,|L10.1016|
000022  6800              LDR      r0,[r0,#0]  ; CanComData
000024  f5006000          ADD      r0,r0,#0x800
000028  5d05              LDRB     r5,[r0,r4]
;;;338    				bt = FIFO_pointer(bt, 1, iCanRxSize);
00002a  f44f6280          MOV      r2,#0x400
00002e  2101              MOVS     r1,#1
000030  4620              MOV      r0,r4
000032  f7fffffe          BL       FIFO_pointer
000036  4604              MOV      r4,r0
;;;339    				data16 |= (CanComData->Rxbuf[bt]<<8);
000038  48ef              LDR      r0,|L10.1016|
00003a  6800              LDR      r0,[r0,#0]  ; CanComData
00003c  f5006000          ADD      r0,r0,#0x800
000040  5d00              LDRB     r0,[r0,r4]
000042  ea452500          ORR      r5,r5,r0,LSL #8
;;;340    				if(iCanComHad == data16){
000046  f64c30ff          MOV      r0,#0xcbff
00004a  4285              CMP      r5,r0
00004c  d109              BNE      |L10.98|
;;;341    					step++;
00004e  48e9              LDR      r0,|L10.1012|
000050  7800              LDRB     r0,[r0,#0]  ; step
000052  1c40              ADDS     r0,r0,#1
000054  49e7              LDR      r1,|L10.1012|
000056  7008              STRB     r0,[r1,#0]
;;;342    					CanDelayTim = 0;
000058  2000              MOVS     r0,#0
00005a  49e8              LDR      r1,|L10.1020|
00005c  8008              STRH     r0,[r1,#0]
;;;343    					flag = 1;
00005e  2701              MOVS     r7,#1
;;;344    					break;
000060  e01a              B        |L10.152|
                  |L10.98|
;;;345    				}else{
;;;346    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, 1, iCanRxSize);
000062  49e5              LDR      r1,|L10.1016|
000064  6809              LDR      r1,[r1,#0]  ; CanComData
000066  f8b10c02          LDRH     r0,[r1,#0xc02]
00006a  f44f6280          MOV      r2,#0x400
00006e  2101              MOVS     r1,#1
000070  f7fffffe          BL       FIFO_pointer
000074  49e0              LDR      r1,|L10.1016|
000076  6809              LDR      r1,[r1,#0]  ; CanComData
000078  f8a10c02          STRH     r0,[r1,#0xc02]
                  |L10.124|
00007c  4ade              LDR      r2,|L10.1016|
00007e  6812              LDR      r2,[r2,#0]            ;335  ; CanComData
000080  f8b21c00          LDRH     r1,[r2,#0xc00]        ;335
000084  4adc              LDR      r2,|L10.1016|
000086  6812              LDR      r2,[r2,#0]            ;335  ; CanComData
000088  f8b20c02          LDRH     r0,[r2,#0xc02]        ;335
00008c  f44f6280          MOV      r2,#0x400             ;335
000090  f7fffffe          BL       FIFO_length
000094  2802              CMP      r0,#2                 ;335
000096  dabf              BGE      |L10.24|
                  |L10.152|
000098  bf00              NOP                            ;344
;;;347    				}
;;;348    			}
;;;349    			if(0 == flag){
00009a  b907              CBNZ     r7,|L10.158|
;;;350    				break;
00009c  e1e4              B        |L10.1128|
                  |L10.158|
;;;351    			}
;;;352    		case 1:
00009e  bf00              NOP      
                  |L10.160|
;;;353    			flag = 0;
0000a0  2700              MOVS     r7,#0
;;;354    			if(FIFO_length(CanComData->RxbufBt, CanComData->RxbufPt, iCanRxSize)>=5){
0000a2  4ad5              LDR      r2,|L10.1016|
0000a4  6812              LDR      r2,[r2,#0]  ; CanComData
0000a6  f8b21c00          LDRH     r1,[r2,#0xc00]
0000aa  4ad3              LDR      r2,|L10.1016|
0000ac  6812              LDR      r2,[r2,#0]  ; CanComData
0000ae  f8b20c02          LDRH     r0,[r2,#0xc02]
0000b2  f44f6280          MOV      r2,#0x400
0000b6  f7fffffe          BL       FIFO_length
0000ba  2805              CMP      r0,#5
0000bc  db43              BLT      |L10.326|
;;;355    				bt = FIFO_pointer(CanComData->RxbufBt, 3, iCanRxSize);
0000be  49ce              LDR      r1,|L10.1016|
0000c0  6809              LDR      r1,[r1,#0]  ; CanComData
0000c2  f8b10c02          LDRH     r0,[r1,#0xc02]
0000c6  f44f6280          MOV      r2,#0x400
0000ca  2103              MOVS     r1,#3
0000cc  f7fffffe          BL       FIFO_pointer
0000d0  4604              MOV      r4,r0
;;;356    				len = CanComData->Rxbuf[bt];
0000d2  48c9              LDR      r0,|L10.1016|
0000d4  6800              LDR      r0,[r0,#0]  ; CanComData
0000d6  f5006000          ADD      r0,r0,#0x800
0000da  5d00              LDRB     r0,[r0,r4]
0000dc  49c8              LDR      r1,|L10.1024|
0000de  8008              STRH     r0,[r1,#0]
;;;357    				bt = FIFO_pointer(bt, 1, iCanRxSize);
0000e0  f44f6280          MOV      r2,#0x400
0000e4  2101              MOVS     r1,#1
0000e6  4620              MOV      r0,r4
0000e8  f7fffffe          BL       FIFO_pointer
0000ec  4604              MOV      r4,r0
;;;358    				len |= (CanComData->Rxbuf[bt]<<8);
0000ee  48c2              LDR      r0,|L10.1016|
0000f0  6800              LDR      r0,[r0,#0]  ; CanComData
0000f2  f5006000          ADD      r0,r0,#0x800
0000f6  5d00              LDRB     r0,[r0,r4]
0000f8  49c1              LDR      r1,|L10.1024|
0000fa  8809              LDRH     r1,[r1,#0]  ; len
0000fc  ea412000          ORR      r0,r1,r0,LSL #8
000100  49bf              LDR      r1,|L10.1024|
000102  8008              STRH     r0,[r1,#0]
;;;359    				if(len < 32){
000104  4608              MOV      r0,r1
000106  8800              LDRH     r0,[r0,#0]  ; len
000108  2820              CMP      r0,#0x20
00010a  da0b              BGE      |L10.292|
;;;360    					CanDelayTim = 0;
00010c  2000              MOVS     r0,#0
00010e  e000              B        |L10.274|
                  |L10.272|
000110  e1a6              B        |L10.1120|
                  |L10.274|
000112  49ba              LDR      r1,|L10.1020|
000114  8008              STRH     r0,[r1,#0]
;;;361    					step++;
000116  48b7              LDR      r0,|L10.1012|
000118  7800              LDRB     r0,[r0,#0]  ; step
00011a  1c40              ADDS     r0,r0,#1
00011c  49b5              LDR      r1,|L10.1012|
00011e  7008              STRB     r0,[r1,#0]
;;;362    					flag = 1;
000120  2701              MOVS     r7,#1
000122  e024              B        |L10.366|
                  |L10.292|
;;;363    				}else{
;;;364    					step = 0;
000124  2000              MOVS     r0,#0
000126  49b3              LDR      r1,|L10.1012|
000128  7008              STRB     r0,[r1,#0]
;;;365    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, 1, iCanRxSize);
00012a  49b3              LDR      r1,|L10.1016|
00012c  6809              LDR      r1,[r1,#0]  ; CanComData
00012e  f8b10c02          LDRH     r0,[r1,#0xc02]
000132  f44f6280          MOV      r2,#0x400
000136  2101              MOVS     r1,#1
000138  f7fffffe          BL       FIFO_pointer
00013c  49ae              LDR      r1,|L10.1016|
00013e  6809              LDR      r1,[r1,#0]  ; CanComData
000140  f8a10c02          STRH     r0,[r1,#0xc02]
000144  e013              B        |L10.366|
                  |L10.326|
;;;366    				}
;;;367    				
;;;368    			}else{				
;;;369    				if(CanDelayTim>=50){					
000146  48ad              LDR      r0,|L10.1020|
000148  8800              LDRH     r0,[r0,#0]  ; CanDelayTim
00014a  2832              CMP      r0,#0x32
00014c  db0f              BLT      |L10.366|
;;;370    					step = 0;
00014e  2000              MOVS     r0,#0
000150  49a8              LDR      r1,|L10.1012|
000152  7008              STRB     r0,[r1,#0]
;;;371    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, 1, iCanRxSize);
000154  49a8              LDR      r1,|L10.1016|
000156  6809              LDR      r1,[r1,#0]  ; CanComData
000158  f8b10c02          LDRH     r0,[r1,#0xc02]
00015c  f44f6280          MOV      r2,#0x400
000160  2101              MOVS     r1,#1
000162  f7fffffe          BL       FIFO_pointer
000166  49a4              LDR      r1,|L10.1016|
000168  6809              LDR      r1,[r1,#0]  ; CanComData
00016a  f8a10c02          STRH     r0,[r1,#0xc02]
                  |L10.366|
;;;372    				}
;;;373    			}
;;;374    			if(0 == flag){
00016e  b907              CBNZ     r7,|L10.370|
;;;375    				break;
000170  e17a              B        |L10.1128|
                  |L10.370|
;;;376    			}
;;;377    		case 2:
000172  bf00              NOP      
                  |L10.372|
;;;378    			if(FIFO_length(CanComData->RxbufBt, CanComData->RxbufPt, iCanRxSize)>=len+7){
000174  4aa0              LDR      r2,|L10.1016|
000176  6812              LDR      r2,[r2,#0]  ; CanComData
000178  f8b21c00          LDRH     r1,[r2,#0xc00]
00017c  4a9e              LDR      r2,|L10.1016|
00017e  6812              LDR      r2,[r2,#0]  ; CanComData
000180  f8b20c02          LDRH     r0,[r2,#0xc02]
000184  f44f6280          MOV      r2,#0x400
000188  f7fffffe          BL       FIFO_length
00018c  499c              LDR      r1,|L10.1024|
00018e  8809              LDRH     r1,[r1,#0]  ; len
000190  1dc9              ADDS     r1,r1,#7
000192  4288              CMP      r0,r1
000194  db7e              BLT      |L10.660|
;;;379    				bt = CanComData->RxbufBt;
000196  4898              LDR      r0,|L10.1016|
000198  6800              LDR      r0,[r0,#0]  ; CanComData
00019a  f8b04c02          LDRH     r4,[r0,#0xc02]
;;;380    				for(i=0;i<len+7;i++){
00019e  2600              MOVS     r6,#0
0001a0  e013              B        |L10.458|
                  |L10.418|
;;;381    					CanComData->Displaybuf[i] = CanComData->Rxbuf[bt];
0001a2  4895              LDR      r0,|L10.1016|
0001a4  6800              LDR      r0,[r0,#0]  ; CanComData
0001a6  f5006000          ADD      r0,r0,#0x800
0001aa  5d00              LDRB     r0,[r0,r4]
0001ac  4992              LDR      r1,|L10.1016|
0001ae  6809              LDR      r1,[r1,#0]  ; CanComData
0001b0  f2410208          MOV      r2,#0x1008
0001b4  4411              ADD      r1,r1,r2
0001b6  5588              STRB     r0,[r1,r6]
;;;382    					bt = FIFO_pointer(bt, 1, iCanRxSize);
0001b8  f44f6280          MOV      r2,#0x400
0001bc  2101              MOVS     r1,#1
0001be  4620              MOV      r0,r4
0001c0  f7fffffe          BL       FIFO_pointer
0001c4  4604              MOV      r4,r0
0001c6  1c70              ADDS     r0,r6,#1              ;380
0001c8  b286              UXTH     r6,r0                 ;380
                  |L10.458|
0001ca  488d              LDR      r0,|L10.1024|
0001cc  8800              LDRH     r0,[r0,#0]            ;380  ; len
0001ce  1dc0              ADDS     r0,r0,#7              ;380
0001d0  4286              CMP      r6,r0                 ;380
0001d2  dbe6              BLT      |L10.418|
;;;383    				}
;;;384    				data16 = CanComData->Displaybuf[len+6];
0001d4  4888              LDR      r0,|L10.1016|
0001d6  6800              LDR      r0,[r0,#0]  ; CanComData
0001d8  f2410108          MOV      r1,#0x1008
0001dc  4401              ADD      r1,r1,r0
0001de  4888              LDR      r0,|L10.1024|
0001e0  8800              LDRH     r0,[r0,#0]  ; len
0001e2  1d80              ADDS     r0,r0,#6
0001e4  5c0d              LDRB     r5,[r1,r0]
;;;385    				data16 <<= 8;
0001e6  f64f70ff          MOV      r0,#0xffff
0001ea  ea002505          AND      r5,r0,r5,LSL #8
;;;386    				data16 += CanComData->Displaybuf[len+5];
0001ee  4882              LDR      r0,|L10.1016|
0001f0  6800              LDR      r0,[r0,#0]  ; CanComData
0001f2  f2410108          MOV      r1,#0x1008
0001f6  4401              ADD      r1,r1,r0
0001f8  4881              LDR      r0,|L10.1024|
0001fa  8800              LDRH     r0,[r0,#0]  ; len
0001fc  1d40              ADDS     r0,r0,#5
0001fe  5c08              LDRB     r0,[r1,r0]
000200  4428              ADD      r0,r0,r5
000202  b285              UXTH     r5,r0
;;;387    				bt = CRC_GetModbus16(CanComData->Displaybuf, len+5);
000204  487e              LDR      r0,|L10.1024|
000206  8800              LDRH     r0,[r0,#0]  ; len
000208  1d40              ADDS     r0,r0,#5
00020a  b281              UXTH     r1,r0
00020c  487a              LDR      r0,|L10.1016|
00020e  6800              LDR      r0,[r0,#0]  ; CanComData
000210  f2410208          MOV      r2,#0x1008
000214  4410              ADD      r0,r0,r2
000216  f7fffffe          BL       CRC_GetModbus16
00021a  4604              MOV      r4,r0
;;;388    				if(data16 == bt){
00021c  42a5              CMP      r5,r4
00021e  d17d              BNE      |L10.796|
;;;389    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, len+7, iCanRxSize);
000220  4a77              LDR      r2,|L10.1024|
000222  8812              LDRH     r2,[r2,#0]  ; len
000224  1dd2              ADDS     r2,r2,#7
000226  b291              UXTH     r1,r2
000228  4a73              LDR      r2,|L10.1016|
00022a  6812              LDR      r2,[r2,#0]  ; CanComData
00022c  f8b20c02          LDRH     r0,[r2,#0xc02]
000230  f44f6280          MOV      r2,#0x400
000234  f7fffffe          BL       FIFO_pointer
000238  496f              LDR      r1,|L10.1016|
00023a  6809              LDR      r1,[r1,#0]  ; CanComData
00023c  f8a10c02          STRH     r0,[r1,#0xc02]
;;;390    					len = 0;
000240  2000              MOVS     r0,#0
000242  496f              LDR      r1,|L10.1024|
000244  8008              STRH     r0,[r1,#0]
;;;391    					//flag = 0;
;;;392    					switch(CanComData->Displaybuf[2]){
000246  486c              LDR      r0,|L10.1016|
000248  6800              LDR      r0,[r0,#0]  ; CanComData
00024a  f2410108          MOV      r1,#0x1008
00024e  4408              ADD      r0,r0,r1
000250  7880              LDRB     r0,[r0,#2]
000252  3860              SUBS     r0,r0,#0x60
000254  2806              CMP      r0,#6
000256  d26e              BCS      |L10.822|
000258  e8dff000          TBB      [pc,r0]
00025c  0348496c          DCB      0x03,0x48,0x49,0x6c
000260  6e95              DCB      0x6e,0x95
;;;393    						case 0x60:							
;;;394    							CanComData->Faultbt = AD_pt;
000262  4868              LDR      r0,|L10.1028|
000264  f7fffffe          BL       DMA_GetCurrDataCounter
000268  f5c04020          RSB      r0,r0,#0xa000
00026c  b281              UXTH     r1,r0
00026e  4862              LDR      r0,|L10.1016|
000270  6800              LDR      r0,[r0,#0]  ; CanComData
000272  f5005080          ADD      r0,r0,#0x1000
000276  f8a01410          STRH     r1,[r0,#0x410]
;;;395    							Test1Set();
00027a  f44f7100          MOV      r1,#0x200
00027e  4862              LDR      r0,|L10.1032|
000280  f7fffffe          BL       GPIO_SetBits
;;;396    							CanComData->FaultFlag = 1;
000284  2101              MOVS     r1,#1
000286  485c              LDR      r0,|L10.1016|
000288  6800              LDR      r0,[r0,#0]  ; CanComData
00028a  f5005080          ADD      r0,r0,#0x1000
00028e  f880140e          STRB     r1,[r0,#0x40e]
;;;397    							CanComData->CanSendFlag &= ~0x01;
000292  e000              B        |L10.662|
                  |L10.660|
000294  e0cf              B        |L10.1078|
                  |L10.662|
000296  4858              LDR      r0,|L10.1016|
000298  6800              LDR      r0,[r0,#0]  ; CanComData
00029a  f5005080          ADD      r0,r0,#0x1000
00029e  f8900408          LDRB     r0,[r0,#0x408]
0002a2  f0200101          BIC      r1,r0,#1
0002a6  4854              LDR      r0,|L10.1016|
0002a8  6800              LDR      r0,[r0,#0]  ; CanComData
0002aa  f5005080          ADD      r0,r0,#0x1000
0002ae  f8801408          STRB     r1,[r0,#0x408]
;;;398    							CanComData->CanWaveSampleFlag = 0;
0002b2  2100              MOVS     r1,#0
0002b4  4850              LDR      r0,|L10.1016|
0002b6  6800              LDR      r0,[r0,#0]  ; CanComData
0002b8  f5005080          ADD      r0,r0,#0x1000
0002bc  f8801409          STRB     r1,[r0,#0x409]
;;;399    							CanComData->OnlineTim = iCanBreathTime;
0002c0  f44f617a          MOV      r1,#0xfa0
0002c4  484c              LDR      r0,|L10.1016|
0002c6  6800              LDR      r0,[r0,#0]  ; CanComData
0002c8  f5005080          ADD      r0,r0,#0x1000
0002cc  f8a0140c          STRH     r1,[r0,#0x40c]
;;;400    							ReadRtcTime();
0002d0  f7fffffe          BL       ReadRtcTime
;;;401    							CanComData->FaultTim = SystemTime;
0002d4  4848              LDR      r0,|L10.1016|
0002d6  6800              LDR      r0,[r0,#0]  ; CanComData
0002d8  f50050a0          ADD      r0,r0,#0x1400
0002dc  494b              LDR      r1,|L10.1036|
0002de  680a              LDR      r2,[r1,#0]  ; SystemTime
0002e0  6182              STR      r2,[r0,#0x18]
0002e2  684a              LDR      r2,[r1,#4]  ; SystemTime
0002e4  61c2              STR      r2,[r0,#0x1c]
0002e6  8909              LDRH     r1,[r1,#8]  ; SystemTime
0002e8  8401              STRH     r1,[r0,#0x20]
;;;402    							break;
0002ea  e06e              B        |L10.970|
;;;403    						case 0x61:							
;;;404    							break;
0002ec  e06d              B        |L10.970|
;;;405    						case 0x62:
;;;406    							if(CanComData->Displaybuf[5]==(EepromData.CanID&0x0FF)){
0002ee  4842              LDR      r0,|L10.1016|
0002f0  6800              LDR      r0,[r0,#0]  ; CanComData
0002f2  f2410108          MOV      r1,#0x1008
0002f6  4408              ADD      r0,r0,r1
0002f8  7940              LDRB     r0,[r0,#5]
0002fa  4945              LDR      r1,|L10.1040|
0002fc  7a09              LDRB     r1,[r1,#8]  ; EepromData
0002fe  4288              CMP      r0,r1
000300  d117              BNE      |L10.818|
;;;407    								//flag = 1;
;;;408    								/*
;;;409    								CanComData->Txbuf[len++] = (uint8_t)iCanComHad;
;;;410    								CanComData->Txbuf[len++] = iCanComHad>>8;
;;;411    								CanComData->Txbuf[len++] = CanComData->Displaybuf[2]|0x80;
;;;412    								len++;
;;;413    								len++;								
;;;414    								memcpy(CanComData->Txbuf+len,(uint8_t *)CanComData->FaultWave,256*12*2);
;;;415    								len	+=	256*12*2;
;;;416    								CanComData->Txbuf[3] = (len-5);
;;;417    								CanComData->Txbuf[4] = (len-5)>>8;
;;;418    								bt = CRC_GetModbus16(CanComData->Txbuf, len);
;;;419    								CanComData->Txbuf[len++] = bt;
;;;420    								CanComData->Txbuf[len++] = bt>>8;
;;;421    								*/
;;;422    								CanComData->CanSendFlag |= 0x01;
000302  483d              LDR      r0,|L10.1016|
000304  6800              LDR      r0,[r0,#0]  ; CanComData
000306  f5005080          ADD      r0,r0,#0x1000
00030a  f8900408          LDRB     r0,[r0,#0x408]
00030e  f0400101          ORR      r1,r0,#1
000312  4839              LDR      r0,|L10.1016|
000314  6800              LDR      r0,[r0,#0]  ; CanComData
000316  f5005080          ADD      r0,r0,#0x1000
00031a  e000              B        |L10.798|
                  |L10.796|
00031c  e07a              B        |L10.1044|
                  |L10.798|
00031e  f8801408          STRB     r1,[r0,#0x408]
;;;423    								CanComData->OnlineTim = iCanBreathTime;
000322  f44f617a          MOV      r1,#0xfa0
000326  4834              LDR      r0,|L10.1016|
000328  6800              LDR      r0,[r0,#0]  ; CanComData
00032a  f5005080          ADD      r0,r0,#0x1000
00032e  f8a0140c          STRH     r1,[r0,#0x40c]
                  |L10.818|
;;;424    							}
;;;425    							break;
000332  e04a              B        |L10.970|
;;;426    						case 0x63:
;;;427    #if 0
;;;428    							memcpy((uint8_t *)&SystemTime,CanComData->Displaybuf+5,sizeof(AlarmTimStruct));
;;;429    							My_RTC_Init(1);
;;;430    							CanComData->Txbuf[len++] = (uint8_t)iCanComHad;
;;;431    							CanComData->Txbuf[len++] = iCanComHad>>8;
;;;432    							CanComData->Txbuf[len++] = CanComData->Displaybuf[2]|0x80;
;;;433    							len++;
;;;434    							len++;
;;;435    							CanComData->Txbuf[3] = (len-5);
;;;436    							CanComData->Txbuf[4] = (len-5)>>8;
;;;437    							bt = CRC_GetModbus16(CanComData->Txbuf, len);
;;;438    							CanComData->Txbuf[len++] = bt;
;;;439    							CanComData->Txbuf[len++] = bt>>8;
;;;440    							CanComData->OnlineFlag = 1;
;;;441    							bsp_LedOn(iGreenLed);
;;;442    							bsp_LedOff(iRedLed);
;;;443    							//CanBreathTimes = 0;
;;;444    							CanComData->OnlineTim = 12000;
;;;445    #endif							
;;;446    							break;
000334  e049              B        |L10.970|
                  |L10.822|
000336  e044              B        |L10.962|
;;;447    						case 0x64:
;;;448    							if((EepromData.CanID&0x00FF) ==  CanComData->Displaybuf[5]){
000338  4835              LDR      r0,|L10.1040|
00033a  7a00              LDRB     r0,[r0,#8]  ; EepromData
00033c  492e              LDR      r1,|L10.1016|
00033e  6809              LDR      r1,[r1,#0]  ; CanComData
000340  f2410208          MOV      r2,#0x1008
000344  4411              ADD      r1,r1,r2
000346  7949              LDRB     r1,[r1,#5]
000348  4288              CMP      r0,r1
00034a  d11b              BNE      |L10.900|
;;;449    								memcpy((uint8_t *)&SystemTime,CanComData->Displaybuf+6,sizeof(AlarmTimStruct));
00034c  482f              LDR      r0,|L10.1036|
00034e  492a              LDR      r1,|L10.1016|
000350  6809              LDR      r1,[r1,#0]  ; CanComData
000352  4411              ADD      r1,r1,r2
000354  f8512f06          LDR      r2,[r1,#6]!
000358  6002              STR      r2,[r0,#0]  ; SystemTime
00035a  684a              LDR      r2,[r1,#4]
00035c  6042              STR      r2,[r0,#4]  ; SystemTime
00035e  8909              LDRH     r1,[r1,#8]
000360  8101              STRH     r1,[r0,#8]
;;;450    								My_RTC_Init(1);
000362  2001              MOVS     r0,#1
000364  f7fffffe          BL       My_RTC_Init
;;;451    								//CanComData->OnlineFlag = 1;
;;;452    								bsp_LedOn(iGreenLed);
000368  2000              MOVS     r0,#0
00036a  f7fffffe          BL       bsp_LedOn
;;;453    								bsp_LedOff(iRedLed);
00036e  2001              MOVS     r0,#1
000370  f7fffffe          BL       bsp_LedOff
;;;454    								//CanBreathTimes = 0;
;;;455    								CanComData->OnlineTim = iCanBreathTime;
000374  f44f617a          MOV      r1,#0xfa0
000378  481f              LDR      r0,|L10.1016|
00037a  6800              LDR      r0,[r0,#0]  ; CanComData
00037c  f5005080          ADD      r0,r0,#0x1000
000380  f8a0140c          STRH     r1,[r0,#0x40c]
                  |L10.900|
;;;456    							}
;;;457    							break;
000384  e021              B        |L10.970|
;;;458    						case 0x65:
;;;459    							if(CanComData->CanSendFlag & 0x01){
000386  481c              LDR      r0,|L10.1016|
000388  6800              LDR      r0,[r0,#0]  ; CanComData
00038a  f5005080          ADD      r0,r0,#0x1000
00038e  f8900408          LDRB     r0,[r0,#0x408]
000392  f0000001          AND      r0,r0,#1
000396  b158              CBZ      r0,|L10.944|
;;;460    								CanComData->CanSendWaveBag = CanComData->Displaybuf[5];
000398  4817              LDR      r0,|L10.1016|
00039a  6800              LDR      r0,[r0,#0]  ; CanComData
00039c  f2410108          MOV      r1,#0x1008
0003a0  4408              ADD      r0,r0,r1
0003a2  7941              LDRB     r1,[r0,#5]
0003a4  4814              LDR      r0,|L10.1016|
0003a6  6800              LDR      r0,[r0,#0]  ; CanComData
0003a8  f5005080          ADD      r0,r0,#0x1000
0003ac  f880140a          STRB     r1,[r0,#0x40a]
                  |L10.944|
;;;461    							}
;;;462    							CanComData->OnlineTim = iCanBreathTime;
0003b0  f44f617a          MOV      r1,#0xfa0
0003b4  4810              LDR      r0,|L10.1016|
0003b6  6800              LDR      r0,[r0,#0]  ; CanComData
0003b8  f5005080          ADD      r0,r0,#0x1000
0003bc  f8a0140c          STRH     r1,[r0,#0x40c]
;;;463    							break;
0003c0  e003              B        |L10.970|
                  |L10.962|
;;;464    						default:
;;;465    							len = 0;							
0003c2  2000              MOVS     r0,#0
0003c4  490e              LDR      r1,|L10.1024|
0003c6  8008              STRH     r0,[r1,#0]
0003c8  bf00              NOP                            ;392
                  |L10.970|
0003ca  bf00              NOP                            ;402
;;;466    					}
;;;467    					if((len)&&(0 == CanComData->CanSendFlag)){						
0003cc  480c              LDR      r0,|L10.1024|
0003ce  8800              LDRH     r0,[r0,#0]  ; len
0003d0  b178              CBZ      r0,|L10.1010|
0003d2  4809              LDR      r0,|L10.1016|
0003d4  6800              LDR      r0,[r0,#0]  ; CanComData
0003d6  f5005080          ADD      r0,r0,#0x1000
0003da  f8900408          LDRB     r0,[r0,#0x408]
0003de  b940              CBNZ     r0,|L10.1010|
;;;468    						SendCanbuf(EepromData.CanID,CanComData->Txbuf,len);						
0003e0  490b              LDR      r1,|L10.1040|
0003e2  8908              LDRH     r0,[r1,#8]  ; EepromData
0003e4  4906              LDR      r1,|L10.1024|
0003e6  880a              LDRH     r2,[r1,#0]  ; len
0003e8  4903              LDR      r1,|L10.1016|
0003ea  6809              LDR      r1,[r1,#0]  ; CanComData
0003ec  f7fffffe          BL       SendCanbuf
0003f0  e01d              B        |L10.1070|
                  |L10.1010|
0003f2  e01c              B        |L10.1070|
                  |L10.1012|
                          DCD      step
                  |L10.1016|
                          DCD      CanComData
                  |L10.1020|
                          DCD      CanDelayTim
                  |L10.1024|
                          DCD      len
                  |L10.1028|
                          DCD      0x40026410
                  |L10.1032|
                          DCD      0x40020000
                  |L10.1036|
                          DCD      SystemTime
                  |L10.1040|
                          DCD      EepromData
                  |L10.1044|
;;;469    					}
;;;470    				}else{
;;;471    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, 1, iCanRxSize);
000414  4916              LDR      r1,|L10.1136|
000416  6809              LDR      r1,[r1,#0]  ; CanComData
000418  f8b10c02          LDRH     r0,[r1,#0xc02]
00041c  f44f6280          MOV      r2,#0x400
000420  2101              MOVS     r1,#1
000422  f7fffffe          BL       FIFO_pointer
000426  4912              LDR      r1,|L10.1136|
000428  6809              LDR      r1,[r1,#0]  ; CanComData
00042a  f8a10c02          STRH     r0,[r1,#0xc02]
                  |L10.1070|
;;;472    				}
;;;473    				step = 0;
00042e  2000              MOVS     r0,#0
000430  4910              LDR      r1,|L10.1140|
000432  7008              STRB     r0,[r1,#0]
000434  e013              B        |L10.1118|
                  |L10.1078|
;;;474    			}else{				
;;;475    				if(CanDelayTim>=50){					
000436  4810              LDR      r0,|L10.1144|
000438  8800              LDRH     r0,[r0,#0]  ; CanDelayTim
00043a  2832              CMP      r0,#0x32
00043c  db0f              BLT      |L10.1118|
;;;476    					step = 0;
00043e  2000              MOVS     r0,#0
000440  490c              LDR      r1,|L10.1140|
000442  7008              STRB     r0,[r1,#0]
;;;477    					CanComData->RxbufBt = FIFO_pointer(CanComData->RxbufBt, 1, iCanRxSize);
000444  490a              LDR      r1,|L10.1136|
000446  6809              LDR      r1,[r1,#0]  ; CanComData
000448  f8b10c02          LDRH     r0,[r1,#0xc02]
00044c  f44f6280          MOV      r2,#0x400
000450  2101              MOVS     r1,#1
000452  f7fffffe          BL       FIFO_pointer
000456  4906              LDR      r1,|L10.1136|
000458  6809              LDR      r1,[r1,#0]  ; CanComData
00045a  f8a10c02          STRH     r0,[r1,#0xc02]
                  |L10.1118|
;;;478    				}
;;;479    			}
;;;480    			break;
00045e  e003              B        |L10.1128|
                  |L10.1120|
;;;481    		default:
;;;482    			step = 0;
000460  2000              MOVS     r0,#0
000462  4904              LDR      r1,|L10.1140|
000464  7008              STRB     r0,[r1,#0]
000466  bf00              NOP                            ;332
                  |L10.1128|
000468  bf00              NOP                            ;350
;;;483    	}
;;;484    
;;;485    }//can_Task
00046a  e8bd81f0          POP      {r4-r8,pc}
;;;486    /*
                          ENDP

00046e  0000              DCW      0x0000
                  |L10.1136|
                          DCD      CanComData
                  |L10.1140|
                          DCD      step
                  |L10.1144|
                          DCD      CanDelayTim

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  g_tCanTxMsg
                          %        20
                  g_tCanRxMsg
                          %        20

                          AREA ||.data||, DATA, ALIGN=1

                  CanDelayTim
000000  0000              DCB      0x00,0x00
                  step
000002  0000              DCB      0x00,0x00
                  len
000004  0000              DCB      0x00,0x00
                  |symbol_number.42|
000006  00                DCB      0x00
                  DelayTim
000007  00                DCB      0x00
                  |symbol_number.44|
000008  0000              DCB      0x00,0x00
                  |symbol_number.45|
00000a  0000              DCB      0x00,0x00
                  |symbol_number.46|
00000c  00                DCB      0x00
                  bagSize
00000d  00                DCB      0x00
                  bagNum
00000e  00                DCB      0x00
                  SendTimes
00000f  00                DCB      0x00
                  |symbol_number.50|
000010  0000              DCB      0x00,0x00
                  |symbol_number.51|
000012  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "..\\..\\User\\can_network.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___13_can_network_c_44242dfb____REV16|
#line 129 "..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___13_can_network_c_44242dfb____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___13_can_network_c_44242dfb____REVSH|
#line 144
|__asm___13_can_network_c_44242dfb____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
